/* empty css                    */import"./vue.cacfbc7c.js";import{Z as T,l as K,u as ht,q as Xe,C as o,b1 as ce,aa as D,t as P,aC as zt,w as le,b2 as ke,a8 as v,O as ee,ay as gt,ar as Me,aE as p,a0 as N,aK as we,a1 as f,aG as it,A as te,_ as V,b6 as F,b8 as Mt,bs as Nn,aq as Ee,bu as ze,bb as St,T as kn,a7 as R,j as wn,bv as Lt,aL as Se,$ as I,J as L,G as ie,aN as X,I as re,aH as Ce,aF as Te,z as $e,bn as Mn,br as Sn,aJ as Wt,al as ot,H as $n,y as qt,be as Cn}from"./@vue.4ce677c2.js";import{i as Tn}from"./is-plain-object.906d88e8.js";import{c as Kt}from"./nanoevents.1080beb7.js";import{L as Ne}from"./lz-string.731cedc5.js";import{Y as In}from"./vue-next-select.9bca520e.js";import{D as Pn}from"./vuedraggable.3ca2b0e8.js";import{p as On}from"./vue-textarea-autosize.35804eaf.js";import{s as Fn,u as En}from"./vue-toastification.0033601f.js";import{v as xn,n as Vn}from"./workbox-window.8d14e8b7.js";import"./sortablejs.f88bbe68.js";const Rn=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};Rn();const Dn="modulepreload",At={},Ln="./",lt=function(t,n){return!n||n.length===0?t():Promise.all(n.map(i=>{if(i=`${Ln}${i}`,i in At)return;At[i]=!0;const s=i.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${r}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":Dn,s||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),s)return new Promise((l,d)=>{a.addEventListener("load",l),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},qn="The Egg Tree",An="idk",Bn="eggtree-rewritten",Un="nirmoll",Gn="",Hn="",jn="0.0",zn="Initial Commit",Wn=!0,Kn=!1,Yn=2,Zn=!0,Jn=null,Xn="",Qn=["main"],ei=3600,ti=1,ni=!0,ii="base64";var q={title:qn,description:An,id:Bn,author:Un,discordName:Gn,discordLink:Hn,versionNumber:jn,versionTitle:zn,allowGoBack:Wn,defaultShowSmall:Kn,defaultDecimalsShown:Yn,useHeader:Zn,banner:Jn,logo:Xn,initialTabs:Qn,maxTickLength:ei,offlineLimit:ti,enablePausing:ni,exportEncoding:ii};const bt=17,si=9e15,ri=Math.log10(9e15),ai=1/9e15,oi=308,li=-324,Bt=5,ui=function(){const e=[];for(let n=li+1;n<=oi;n++)e.push(Number("1e"+n));const t=323;return function(n){return e[n+t]}}(),Pe=[2,Math.E,3,4,5,6,7,8,9,10],ci=[[1,1.0891168053867777,1.1789745164521264,1.2701428397304229,1.3632066654400328,1.4587804913784246,1.557523817412741,1.660158301473385,1.767487542936873,1.8804205225512542,2],[1,1.1121114330934,1.23103892493161,1.35838369631113,1.49605193039935,1.64635423375119,1.81213853570186,1.99697132461829,2.20538955455724,2.44325744833852,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.18422737399915,1.4066113788546144,1.680911177655277,2.027492094355525,2.4775152854601967,3.080455730250329,3.918234505962507,5.1332705696484595,6.9878696918072905,10]],di=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],c=function(t){return m.fromValue_noAlloc(t)},O=function(e,t,n){return m.fromComponents(e,t,n)},x=function(t,n,i){return m.fromComponents_noNormalize(t,n,i)},_e=function(t,n){const i=n+1,s=Math.ceil(Math.log10(Math.abs(t))),r=Math.round(t*Math.pow(10,i-s))*Math.pow(10,s-i);return parseFloat(r.toFixed(Math.max(i-s,0)))},Nt=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},fi=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const i=e*e;let s=e;return n=n+1/(12*s),s=s*i,n=n+1/(360*s),s=s*i,n=n+1/(1260*s),s=s*i,n=n+1/(1680*s),s=s*i,n=n+1/(1188*s),s=s*i,n=n+691/(360360*s),s=s*i,n=n+7/(1092*s),s=s*i,n=n+3617/(122400*s),Math.exp(n)/t},Yt=.5671432904097838,Ut=function(e,t=1e-10){let n,i;if(!Number.isFinite(e)||e===0)return e;if(e===1)return Yt;e<10?n=0:n=Math.log(e)-Math.log(Math.log(e));for(let s=0;s<100;++s){if(i=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(i-n)<t*Math.abs(i))return i;n=i}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Gt(e,t=1e-10){let n,i,s,r;if(!Number.isFinite(e.mag)||e===m.dZero)return e;if(e===m.dOne)return c(Yt);m.abs(e),n=m.ln(e);for(let a=0;a<100;++a){if(i=m.exp(-n),s=n.sub(e.mul(i)),r=n.sub(s.div(n.add(1).sub(n.add(2).mul(s).div(m.mul(2,n).add(2))))),m.abs(r.sub(n)).lt(m.abs(r).mul(t)))return r;n=r}throw Error(`Iteration failed to converge: ${e.toString()}`)}const g=class{constructor(e){this.sign=Number.NaN,this.mag=Number.NaN,this.layer=Number.NaN,e instanceof g||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/ui(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer,this.exponent))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,n){return new g().fromComponents(e,t,n)}static fromComponents_noNormalize(e,t,n){return new g().fromComponents_noNormalize(e,t,n)}static fromMantissaExponent(e,t){return new g().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new g().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new g().fromDecimal(e)}static fromNumber(e){return new g().fromNumber(e)}static fromString(e){return new g().fromString(e)}static fromValue(e){return new g().fromValue(e)}static fromValue_noAlloc(e){return e instanceof g?e:new g(e)}static abs(e){return c(e).abs()}static neg(e){return c(e).neg()}static negate(e){return c(e).neg()}static negated(e){return c(e).neg()}static sign(e){return c(e).sign}static sgn(e){return c(e).sign}static round(e){return c(e).round()}static floor(e){return c(e).floor()}static ceil(e){return c(e).ceil()}static trunc(e){return c(e).trunc()}static add(e,t){return c(e).add(t)}static plus(e,t){return c(e).add(t)}static sub(e,t){return c(e).sub(t)}static subtract(e,t){return c(e).sub(t)}static minus(e,t){return c(e).sub(t)}static mul(e,t){return c(e).mul(t)}static multiply(e,t){return c(e).mul(t)}static times(e,t){return c(e).mul(t)}static div(e,t){return c(e).div(t)}static divide(e,t){return c(e).div(t)}static recip(e){return c(e).recip()}static reciprocal(e){return c(e).recip()}static reciprocate(e){return c(e).reciprocate()}static cmp(e,t){return c(e).cmp(t)}static cmpabs(e,t){return c(e).cmpabs(t)}static compare(e,t){return c(e).cmp(t)}static isNaN(e){return e=c(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=c(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return c(e).eq(t)}static equals(e,t){return c(e).eq(t)}static neq(e,t){return c(e).neq(t)}static notEquals(e,t){return c(e).notEquals(t)}static lt(e,t){return c(e).lt(t)}static lte(e,t){return c(e).lte(t)}static gt(e,t){return c(e).gt(t)}static gte(e,t){return c(e).gte(t)}static max(e,t){return c(e).max(t)}static min(e,t){return c(e).min(t)}static minabs(e,t){return c(e).minabs(t)}static maxabs(e,t){return c(e).maxabs(t)}static clamp(e,t,n){return c(e).clamp(t,n)}static clampMin(e,t){return c(e).clampMin(t)}static clampMax(e,t){return c(e).clampMax(t)}static cmp_tolerance(e,t,n){return c(e).cmp_tolerance(t,n)}static compare_tolerance(e,t,n){return c(e).cmp_tolerance(t,n)}static eq_tolerance(e,t,n){return c(e).eq_tolerance(t,n)}static equals_tolerance(e,t,n){return c(e).eq_tolerance(t,n)}static neq_tolerance(e,t,n){return c(e).neq_tolerance(t,n)}static notEquals_tolerance(e,t,n){return c(e).notEquals_tolerance(t,n)}static lt_tolerance(e,t,n){return c(e).lt_tolerance(t,n)}static lte_tolerance(e,t,n){return c(e).lte_tolerance(t,n)}static gt_tolerance(e,t,n){return c(e).gt_tolerance(t,n)}static gte_tolerance(e,t,n){return c(e).gte_tolerance(t,n)}static pLog10(e){return c(e).pLog10()}static absLog10(e){return c(e).absLog10()}static log10(e){return c(e).log10()}static log(e,t){return c(e).log(t)}static log2(e){return c(e).log2()}static ln(e){return c(e).ln()}static logarithm(e,t){return c(e).logarithm(t)}static pow(e,t){return c(e).pow(t)}static pow10(e){return c(e).pow10()}static root(e,t){return c(e).root(t)}static factorial(e,t){return c(e).factorial()}static gamma(e,t){return c(e).gamma()}static lngamma(e,t){return c(e).lngamma()}static exp(e){return c(e).exp()}static sqr(e){return c(e).sqr()}static sqrt(e){return c(e).sqrt()}static cube(e){return c(e).cube()}static cbrt(e){return c(e).cbrt()}static tetrate(e,t=2,n=x(1,0,1)){return c(e).tetrate(t,n)}static iteratedexp(e,t=2,n=x(1,0,1)){return c(e).iteratedexp(t,n)}static iteratedlog(e,t=10,n=1){return c(e).iteratedlog(t,n)}static layeradd10(e,t){return c(e).layeradd10(t)}static layeradd(e,t,n=10){return c(e).layeradd(t,n)}static slog(e,t=10){return c(e).slog(t)}static lambertw(e){return c(e).lambertw()}static ssqrt(e){return c(e).ssqrt()}static pentate(e,t=2,n=x(1,0,1)){return c(e).pentate(t,n)}static affordGeometricSeries(e,t,n,i){return this.affordGeometricSeries_core(c(e),c(t),c(n),i)}static sumGeometricSeries(e,t,n,i){return this.sumGeometricSeries_core(e,c(t),c(n),i)}static affordArithmeticSeries(e,t,n,i){return this.affordArithmeticSeries_core(c(e),c(t),c(n),c(i))}static sumArithmeticSeries(e,t,n,i){return this.sumArithmeticSeries_core(c(e),c(t),c(n),c(i))}static efficiencyOfPurchase(e,t,n){return this.efficiencyOfPurchase_core(c(e),c(t),c(n))}static randomDecimalForTesting(e){if(Math.random()*20<1)return x(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return x(t,0,1);const n=Math.floor(Math.random()*(e+1));let i=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(i=Math.trunc(i));let s=Math.pow(10,i);return Math.random()>.9&&(s=Math.trunc(s)),O(t,n,s)}static affordGeometricSeries_core(e,t,n,i){const s=t.mul(n.pow(i));return g.floor(e.div(s).mul(n.sub(1)).add(1).log10().div(n.log10()))}static sumGeometricSeries_core(e,t,n,i){return t.mul(n.pow(i)).mul(g.sub(1,n.pow(e))).div(g.sub(1,n))}static affordArithmeticSeries_core(e,t,n,i){const r=t.add(i.mul(n)).sub(n.div(2)),a=r.pow(2);return r.neg().add(a.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}static sumArithmeticSeries_core(e,t,n,i){const s=t.add(i.mul(n));return e.div(2).mul(s.mul(2).plus(e.sub(1).mul(n)))}static efficiencyOfPurchase_core(e,t,n){return e.div(t).add(e.div(n))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<ai)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=si)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<ri&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}fromComponents_noNormalize(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){e=e.replace(",","");const t=e.split("^^^");if(t.length===2){const h=parseFloat(t[0]),_=parseFloat(t[1]),S=t[1].split(";");let k=1;if(S.length===2&&(k=parseFloat(S[1]),isFinite(k)||(k=1)),isFinite(h)&&isFinite(_)){const A=g.pentate(h,_,k);return this.sign=A.sign,this.layer=A.layer,this.mag=A.mag,this}}const n=e.split("^^");if(n.length===2){const h=parseFloat(n[0]),_=parseFloat(n[1]),S=n[1].split(";");let k=1;if(S.length===2&&(k=parseFloat(S[1]),isFinite(k)||(k=1)),isFinite(h)&&isFinite(_)){const A=g.tetrate(h,_,k);return this.sign=A.sign,this.layer=A.layer,this.mag=A.mag,this}}const i=e.split("^");if(i.length===2){const h=parseFloat(i[0]),_=parseFloat(i[1]);if(isFinite(h)&&isFinite(_)){const S=g.pow(h,_);return this.sign=S.sign,this.layer=S.layer,this.mag=S.mag,this}}e=e.trim().toLowerCase();let s,r,a=e.split("pt");if(a.length===2){s=10,r=parseFloat(a[0]),a[1]=a[1].replace("(",""),a[1]=a[1].replace(")","");let h=parseFloat(a[1]);if(isFinite(h)||(h=1),isFinite(s)&&isFinite(r)){const _=g.tetrate(s,r,h);return this.sign=_.sign,this.layer=_.layer,this.mag=_.mag,this}}if(a=e.split("p"),a.length===2){s=10,r=parseFloat(a[0]),a[1]=a[1].replace("(",""),a[1]=a[1].replace(")","");let h=parseFloat(a[1]);if(isFinite(h)||(h=1),isFinite(s)&&isFinite(r)){const _=g.tetrate(s,r,h);return this.sign=_.sign,this.layer=_.layer,this.mag=_.mag,this}}const l=e.split("e"),d=l.length-1;if(d===0){const h=parseFloat(e);if(isFinite(h))return this.fromNumber(h)}else if(d===1){const h=parseFloat(e);if(isFinite(h)&&h!==0)return this.fromNumber(h)}const u=e.split("e^");if(u.length===2){this.sign=1,u[0].charAt(0)=="-"&&(this.sign=-1);let h="";for(let _=0;_<u[1].length;++_){const S=u[1].charCodeAt(_);if(S>=43&&S<=57||S===101)h+=u[1].charAt(_);else return this.layer=parseFloat(h),this.mag=parseFloat(u[1].substr(_+1)),this.normalize(),this}}if(d<1)return this.sign=0,this.layer=0,this.mag=0,this;const b=parseFloat(l[0]);if(b===0)return this.sign=0,this.layer=0,this.mag=0,this;let y=parseFloat(l[l.length-1]);if(d>=2){const h=parseFloat(l[l.length-2]);isFinite(h)&&(y*=Math.sign(h),y+=Nt(h))}if(!isFinite(b))this.sign=l[0]==="-"?-1:1,this.layer=d,this.mag=y;else if(d===1)this.sign=Math.sign(b),this.layer=1,this.mag=y+Math.log10(Math.abs(b));else if(this.sign=Math.sign(b),this.layer=d,d===2){const h=g.mul(O(1,2,y),c(b));return this.sign=h.sign,this.layer=h.layer,this.mag=h.mag,this}else this.mag=y;return this.normalize(),this}fromValue(e){return e instanceof g||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:_e(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:_e(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Bt?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):_e(this.m,e)+"e"+_e(this.e,e):this.layer===1?_e(this.m,e)+"e"+_e(this.e,e):this.layer<=Bt?(this.sign===-1?"-":"")+"e".repeat(this.layer)+_e(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+_e(this.mag,e)}abs(){return x(this.sign===0?0:1,this.layer,this.mag)}neg(){return x(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?g.dZero:this.layer===0?O(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?g.dZero:this.layer===0?O(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?g.dZero:this.layer===0?O(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?g.dZero:this.layer===0?O(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=c(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return x(0,0,0);let n,i;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(g.cmpabs(this,t)>0?(n=this,i=t):(n=t,i=this),n.layer===0&&i.layer===0)return c(n.sign*n.mag+i.sign*i.mag);const s=n.layer*Math.sign(n.mag),r=i.layer*Math.sign(i.mag);if(s-r>=2)return n;if(s===0&&r===-1){if(Math.abs(i.mag-Math.log10(n.mag))>bt)return n;{const a=Math.pow(10,Math.log10(n.mag)-i.mag),l=i.sign+n.sign*a;return O(Math.sign(l),1,i.mag+Math.log10(Math.abs(l)))}}if(s===1&&r===0){if(Math.abs(n.mag-Math.log10(i.mag))>bt)return n;{const a=Math.pow(10,n.mag-Math.log10(i.mag)),l=i.sign+n.sign*a;return O(Math.sign(l),1,Math.log10(i.mag)+Math.log10(Math.abs(l)))}}if(Math.abs(n.mag-i.mag)>bt)return n;{const a=Math.pow(10,n.mag-i.mag),l=i.sign+n.sign*a;return O(Math.sign(l),1,i.mag+Math.log10(Math.abs(l)))}}plus(e){return this.add(e)}sub(e){return this.add(c(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=c(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return x(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return x(this.sign*t.sign,0,1);let n,i;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,i=t):(n=t,i=this),n.layer===0&&i.layer===0)return c(n.sign*i.sign*n.mag*i.mag);if(n.layer>=3||n.layer-i.layer>=2)return O(n.sign*i.sign,n.layer,n.mag);if(n.layer===1&&i.layer===0)return O(n.sign*i.sign,1,n.mag+Math.log10(i.mag));if(n.layer===1&&i.layer===1)return O(n.sign*i.sign,1,n.mag+i.mag);if(n.layer===2&&i.layer===1){const s=O(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(O(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)));return O(n.sign*i.sign,s.layer+1,s.sign*s.mag)}if(n.layer===2&&i.layer===2){const s=O(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(O(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)));return O(n.sign*i.sign,s.layer+1,s.sign*s.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=c(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?g.dNaN:this.layer===0?O(this.sign,0,1/this.mag):O(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=c(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=c(e),n=this.mag>0?this.layer:-this.layer,i=t.mag>0?t.layer:-t.layer;return n>i?1:n<i?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=c(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=c(e);return this.lt(t)?t:this}min(e){const t=c(e);return this.gt(t)?t:this}maxabs(e){const t=c(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=c(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const n=c(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const n=c(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;let i=this.mag,s=n.mag;return this.layer>n.layer&&(s=Nt(s)),this.layer<n.layer&&(i=Nt(i)),Math.abs(i-s)<=t*Math.max(Math.abs(i),Math.abs(s))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const n=c(e);return!this.eq_tolerance(n,t)&&this.lt(n)}lte_tolerance(e,t){const n=c(e);return this.eq_tolerance(n,t)||this.lt(n)}gt_tolerance(e,t){const n=c(e);return!this.eq_tolerance(n,t)&&this.gt(n)}gte_tolerance(e,t){const n=c(e);return this.eq_tolerance(n,t)||this.gt(n)}pLog10(){return this.lt(g.dZero)?g.dZero:this.log10()}absLog10(){return this.sign===0?g.dNaN:this.layer>0?O(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):O(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?g.dNaN:this.layer>0?O(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):O(this.sign,0,Math.log10(this.mag))}log(e){return e=c(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?g.dNaN:this.layer===0&&e.layer===0?O(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):g.div(this.log10(),e.log10())}log2(){return this.sign<=0?g.dNaN:this.layer===0?O(this.sign,0,Math.log2(this.mag)):this.layer===1?O(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?O(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):O(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?g.dNaN:this.layer===0?O(this.sign,0,Math.log(this.mag)):this.layer===1?O(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?O(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):O(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=c(e),n=this,i=t;if(n.sign===0)return i.eq(0)?x(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(i.sign===0)return x(1,0,1);if(i.sign===1&&i.layer===0&&i.mag===1)return n;const s=n.absLog10().mul(i).pow10();return this.sign===-1?Math.abs(i.toNumber()%2)%2===1?s.neg():Math.abs(i.toNumber()%2)%2===0?s:g.dNaN:s}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return g.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return O(1,0,t);if(e.sign===0)return g.dOne;e=x(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?O(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?O(-e.sign,e.layer+1,-e.mag):g.dOne}pow_base(e){return c(e).pow(this)}root(e){const t=c(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?g.exp(g.mul(this,g.ln(this).sub(1))):g.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(x(1,0,24)))return c(fi(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const n=e*e;let i=e,s=12*i,r=1/s,a=t+r;if(a===t||(t=a,i=i*n,s=360*i,r=1/s,a=t-r,a===t))return g.exp(t);t=a,i=i*n,s=1260*i;let l=1/s;return t=t+l,i=i*n,s=1680*i,l=1/s,t=t-l,g.exp(t)}else return this.layer===1?g.exp(g.mul(this,g.ln(this).sub(1))):g.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?g.dOne:this.layer===0&&this.mag<=709.7?c(Math.exp(this.sign*this.mag)):this.layer===0?O(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?O(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):O(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return c(Math.sqrt(this.sign*this.mag));if(this.layer===1)return O(1,2,Math.log10(this.mag)-.3010299956639812);{const e=g.div(x(this.sign,this.layer-1,this.mag),x(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=x(1,0,1)){if(e===1)return g.pow(this,t);if(e===0)return new g(t);if(this.eq(g.dOne))return g.dOne;if(this.eq(-1))return g.pow(this,t);if(e===Number.POSITIVE_INFINITY){const s=this.toNumber();if(s<=1.444667861009766&&s>=.06598803584531254){if(s>1.444667861009099)return new g(Math.E);const r=g.ln(this).neg();return r.lambertw().div(r)}else return s>1.444667861009766?new g(Number.POSITIVE_INFINITY):g.dNaN}if(this.eq(g.dZero)){let s=Math.abs((e+1)%2);return s>1&&(s=2-s),new g(s)}if(e<0)return g.iteratedlog(t,this,-e);t=c(t);const n=e;e=Math.trunc(e);const i=n-e;if(this.gt(g.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let s=0;s<e;++s){const r=t;if(t=this.pow(t),r.eq(t))return t}if(i!=0){const s=this.pow(t);return t.mul(1-i).add(s.mul(i))}return t}i!==0&&(t.eq(g.dOne)?this.gt(10)?t=this.pow(i):(t=c(g.tetrate_critical(this.toNumber(),i)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(i):t=t.layeradd(i,this));for(let s=0;s<e;++s){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return x(t.sign,t.layer+(e-s-1),t.mag);if(s>1e4)return t}return t}iteratedexp(e=2,t=x(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return g.tetrate(e,-t,this);e=c(e);let n=c(this);const i=t;t=Math.trunc(t);const s=i-t;if(n.layer-e.layer>3){const r=Math.min(t,n.layer-e.layer-3);t-=r,n.layer-=r}for(let r=0;r<t;++r){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(r>1e4)return n}return s>0&&s<1&&(e.eq(10)?n=n.layeradd10(-s):n=n.layeradd(-s,e)),n}slog(e=10){if(e=c(e),e.lte(g.dZero)||e.eq(g.dOne))return g.dNaN;if(e.lt(g.dOne))return this.eq(g.dOne)?g.dZero:this.eq(g.dZero)?g.dNegOne:g.dNaN;if(this.mag<0||this.eq(g.dZero))return g.dNegOne;let t=0,n=c(this);if(n.layer-e.layer>3){const i=n.layer-e.layer-3;t+=i,n.layer-=i}for(let i=0;i<100;++i)if(n.lt(g.dZero))n=g.pow(e,n),t-=1;else{if(n.lte(g.dOne))return c(t+g.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=g.log(n,e)}return c(t)}static slog_critical(e,t){return e>10?t-1:g.critical_section(e,t,di)}static tetrate_critical(e,t){return g.critical_section(e,t,ci)}static critical_section(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let i=0,s=0;for(let l=0;l<Pe.length;++l)if(Pe[l]==e){i=n[l][Math.floor(t)],s=n[l][Math.ceil(t)];break}else if(Pe[l]<e&&Pe[l+1]>e){const d=(e-Pe[l])/(Pe[l+1]-Pe[l]);i=n[l][Math.floor(t)]*(1-d)+n[l+1][Math.floor(t)]*d,s=n[l][Math.ceil(t)]*(1-d)+n[l+1][Math.ceil(t)]*d;break}const r=t-Math.floor(t);return i*(1-r)+s*r}layeradd10(e){e=g.fromValue_noAlloc(e).toNumber();const t=c(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){const n=Math.trunc(e);if(e-=n,t.layer+=n,t.layer<0)for(let i=0;i<100;++i){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const i=this.slog(t).toNumber()+e;return i>=0?g.tetrate(t,i):Number.isFinite(i)?i>=-1?g.log(g.tetrate(t,i+1),t):g.log(g.log(g.tetrate(t,i+2),t),t):g.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return c(Ut(this.toNumber()));if(this.layer===0)return c(Ut(this.sign*this.mag));if(this.layer===1)return Gt(this);if(this.layer===2)return Gt(this);if(this.layer>=3)return x(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return x(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=x(1,0,1)){t=c(t);const n=e;e=Math.trunc(e);const i=n-e;i!==0&&(t.eq(g.dOne)?(++e,t=new g(i)):this.eq(10)?t=t.layeradd10(i):t=t.layeradd(i,this));for(let s=0;s<e;++s){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(s>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?c(Math.sin(this.sign*this.mag)):x(0,0,0)}cos(){return this.mag<0?g.dOne:this.layer===0?c(Math.cos(this.sign*this.mag)):x(0,0,0)}tan(){return this.mag<0?this:this.layer===0?c(Math.tan(this.sign*this.mag)):x(0,0,0)}asin(){return this.mag<0?this:this.layer===0?c(Math.asin(this.sign*this.mag)):x(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?c(Math.acos(this.toNumber())):this.layer===0?c(Math.acos(this.sign*this.mag)):x(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?c(Math.atan(this.sign*this.mag)):c(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return g.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return g.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?x(Number.NaN,Number.NaN,Number.NaN):g.ln(this.add(1).div(c(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(g.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let m=g;m.dZero=x(0,0,0);m.dOne=x(1,0,1);m.dNegOne=x(-1,0,1);m.dTwo=x(1,0,2);m.dTen=x(1,0,10);m.dNaN=x(Number.NaN,Number.NaN,Number.NaN);m.dInf=x(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);m.dNegInf=x(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);m.dNumberMax=O(1,0,Number.MAX_VALUE);m.dNumberMin=O(1,0,Number.MIN_VALUE);const mi=new m(1);function He(e,t,n=!0){let i=m.log10(e).floor(),s=m.div(e,m.pow(10,i));s.toStringWithDecimalPlaces(t)==="10"&&(s=mi,i=i.add(1));const r=i.gte(1e9)?ue(i,Math.max(Math.max(t,3),q.defaultDecimalsShown)):i.gte(1e4)?ut(i,0):i.toStringWithDecimalPlaces(0);return n?s.toStringWithDecimalPlaces(t)+"e"+r:"e"+r}function ut(e,t){if(e==null)return"NaN";if(e=new m(e),e.mag<.001)return 0 .toFixed(t);const i=e.toStringWithDecimalPlaces(t).split(".");return i[0]=i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),i.length==1?i[0]:i[0]+"."+i[1]}function Zt(e,t){return e==null?"NaN":(e=new m(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),q.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const hi=new m("eeee1000"),gi=new m("e100000"),Ht=new m("e1000"),Jt=new m(1e9),pi=new m(1e6),vi=new m(1e3),yi=new m(.98),_i=new m(.001),Xt=new m(0);function ue(e,t,n){if(t==null&&(t=q.defaultDecimalsShown),n=n!=null?n:q.defaultShowSmall,e=new m(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+ue(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(hi)){const i=e.slog();return i.gte(pi)?"F"+ue(i.floor()):m.pow(10,i.sub(i.floor())).toStringWithDecimalPlaces(3)+"F"+ut(i.floor(),0)}else{if(e.gte(gi))return He(e,0,!1);if(e.gte(Ht))return He(e,0);if(e.gte(Jt))return He(e,t);if(e.gte(vi))return ut(e,0);if(e.gte(_i)||!n)return Zt(e,t);if(e.eq(Xt))return 0 .toFixed(t)}return e=en(e),e.lt(Ht)?He(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):ue(e,t)+"\u207B\xB9"}function oe(e){return e=new m(e),e.sign<0?"-"+oe(e.neg()):e.gte(Jt)||e.lte(yi)&&!e.eq(Xt)?ue(e):ue(e,0)}function Qt(e){return m.lt(e,0)?"-"+Qt(m.neg(e)):m.gt(e,2**51)?ue(m.div(e,31536e3))+"y":(e=new m(e).toNumber(),e<60?ue(e)+"s":e<3600?oe(Math.floor(e/60))+"m "+ue(e%60)+"s":e<86400?oe(Math.floor(e/3600))+"h "+oe(Math.floor(e/60)%60)+"m "+oe(e%60)+"s":e<31536e3?oe(Math.floor(e/84600)%365)+"d "+oe(Math.floor(e/3600)%24)+"h "+oe(Math.floor(e/60)%60)+"m":oe(Math.floor(e/31536e3))+"y "+oe(Math.floor(e/84600)%365)+"d "+oe(Math.floor(e/3600)%24)+"h")}function bi(e,t,n){e=new m(e);let i=e.toStringWithDecimalPlaces(t);return new m(i).gte(n)&&(i=m.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),i}function Ni(e,t){return ue(e,t,!0)}function en(e){let t=m.log10(e).ceil();const n=m.div(e,m.pow(10,t));return t=t.neg(),e=new m(10).pow(t).times(n),e}var ki=Object.freeze(Object.defineProperty({__proto__:null,default:m,exponentialFormat:He,commaFormat:ut,regularFormat:Zt,format:ue,formatWhole:oe,formatTime:Qt,toPlaces:bi,formatSmall:Ni,invertOOM:en},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:wi,commaFormat:Mi,regularFormat:Si,format:ge,formatWhole:Ae,formatTime:pt,toPlaces:$i,formatSmall:Ci,invertOOM:Ti}=ki;window.Decimal=m;window.exponentialFormat=wi;window.commaFormat=Mi;window.regularFormat=Si;window.format=ge;window.formatWhole=Ae;window.formatTime=pt;window.toPlaces=$i;window.formatSmall=Ci;window.invertOOM=Ti;function Ii(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function kt(e){return typeof e=="function"}var W=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(W||{});const We=Symbol("DoNotCache");function C(e,t){const n=e[t];kt(n)&&n.length===0&&!n[We]?e[t]=T(n.bind(e)):kt(n)&&(e[t]=n.bind(e),e[t][We]=!0)}function wt(e){return kt(e)&&!e[We]&&(e=T(e)),e}const me=Symbol("Component"),he=Symbol("GatherProps");let Pi=0;function Qe(e="feature-"){return e+Pi++}var pe=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(pe||{});function J(e){return e[We]=!0,e}function Q(e,t,n){e[t]===void 0&&n!=null&&(e[t]=n)}function tn(e,...t){const n=[],i=s=>{Object.keys(s).forEach(r=>{const a=s[r];a&&typeof a=="object"&&(t.includes(a.type)?n.push(a):!(a instanceof m)&&!K(a)&&i(a))})};return i(e),n}const Oe={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var $t=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))($t||{}),Ct={classic:Oe,paper:{...Oe,variables:{...Oe.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Oe,variables:{...Oe.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Oe,variables:{...Oe.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const j=Symbol("ProxyState"),Re=Symbol("ProxyPath");function Ie(e,t={}){const n=t;let i=!1;function s(){return i||(Object.assign(n,e(n)),i=!0),n}return new Proxy(n,{get(r,a){return a===j?s():s()[a]},set(r,a,l){return s()[a]=l,!0},has(r,a){return a===j?!0:Reflect.has(s(),a)},ownKeys(){return Reflect.ownKeys(s())},getOwnPropertyDescriptor(r,a){return i||(Object.assign(n,e(n)),i=!0),Object.getOwnPropertyDescriptor(r,a)}})}var G=window.state=ht({lastTenTicks:[],hasNaN:!1,NaNPath:[]});const nn=Xe({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});function sn(e){return JSON.stringify(e,(t,n)=>o(n))}const rn={get(e,t){var i;if(t===j||t===Re)return e[t];const n=e[j][t];if(t!=="value"&&(Tn(n)||Array.isArray(n))){if(n!==((i=e[t])==null?void 0:i[j])){const s=[...e[Re],t];e[t]=new Proxy({[j]:n,[Re]:s},rn)}return e[t]}return n},set(e,t,n,i){if(!G.hasNaN&&(typeof n=="number"&&isNaN(n)||n instanceof m&&(isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag)))){const s=e[j][t];if(!(typeof s=="number"&&isNaN(s)||s instanceof m&&(isNaN(s.sign)||isNaN(s.layer)||isNaN(s.mag))))throw nn.autosave=!1,G.hasNaN=!0,G.NaNPath=[...e[Re],t],G.NaNReceiver=i,console.error("Attempted to set NaN value",[...e[Re],t],e[j]),"Attempted to set NaN value. See above for details"}return e[j][t]=n,!0},ownKeys(e){return Reflect.ownKeys(e[j])},has(e,t){return Reflect.has(e[j],t)},getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e[j],t)}};var w=window.player=new Proxy({[j]:nn,[Re]:["player"]},rn);const Y=Kt();let De=null,je=null;function ct(){const e=Date.now();let t=(e-w.time)/1e3;w.time=e;const n=t;if(G.lastTenTicks.push(n),G.lastTenTicks.length>10&&(G.lastTenTicks=G.lastTenTicks.slice(1)),!((je==null?void 0:je.value)&&!w.keepGoing)&&!G.hasNaN&&(t=Math.max(t,0),w.devSpeed!==0)){if(w.offlineTime!=null){if(m.gt(w.offlineTime,q.offlineLimit*3600)&&(w.offlineTime=q.offlineLimit*3600),m.gt(w.offlineTime,0)&&w.devSpeed!==0){const i=Math.max(w.offlineTime/10,t);w.offlineTime=w.offlineTime-i,t+=i}else w.devSpeed===0&&(w.offlineTime+=t);(!w.offlineProd||m.lt(w.offlineTime,0))&&(w.offlineTime=null)}t=Math.min(t,q.maxTickLength),w.devSpeed!=null&&(t*=w.devSpeed),Number.isFinite(t)||(t=1e308),!m.eq(t,0)&&(w.timePlayed+=t,Number.isFinite(w.timePlayed)||(w.timePlayed=1e308),Y.emit("update",t,n),Z.unthrottled?(requestAnimationFrame(ct),De!=null&&(clearInterval(De),De=null)):De==null&&(De=setInterval(ct,50)))}}async function Oi(){je=(await lt(()=>Promise.resolve().then(function(){return bn}),void 0)).hasWon,ce(je,e=>{e&&Y.emit("gameWon")}),Z.unthrottled?requestAnimationFrame(ct):De=setInterval(ct,50)}document.fonts.onloadingdone=()=>Y.emit("fontsLoaded");var Fi=Object.freeze(Object.defineProperty({__proto__:null,globalBus:Y,startGameLoop:Oi},Symbol.toStringTag,{value:"Module"}));function an(e={}){return Object.assign({id:`${q.id}-0`,name:"Default Save",tabs:q.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:q.id,modVersion:q.versionNumber,layers:{}},e)}function de(e){const t=Ne.compressToUTF16(sn(e!=null?e:w[j]));return localStorage.setItem((e!=null?e:w[j]).id,t),t}async function Ei(){Vi();try{let e=localStorage.getItem(Z.active);if(e==null){await Fe(Le());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ne.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==q.id){await Fe(Le());return}t.id=Z.active,await Fe(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await Fe(Le())}}function Le(){const e=rt(),t=an({id:e});return de(t),Z.saves.push(e),t}function rt(){let e,t=0;do e=`${q.id}-${t++}`;while(localStorage.getItem(e));return e}async function Fe(e){console.info("Loading save",e);const{layers:t,removeLayer:n,addLayer:i}=await lt(()=>Promise.resolve().then(function(){return ts}),void 0),{fixOldSave:s,getInitialLayers:r}=await lt(()=>Promise.resolve().then(function(){return bn}),void 0);for(const a in t){const l=t[a];l&&n(l)}r(e).forEach(a=>i(a,e)),e=an(e),e.offlineProd&&e.time&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=(Date.now()-e.time)/1e3),e.time=Date.now(),e.modVersion!==q.versionNumber&&s(e.modVersion,e),Object.assign(w,e),Z.active=w.id,Y.emit("onLoad")}setInterval(()=>{w.autosave&&de()},1e3);window.onbeforeunload=()=>{w.autosave&&de()};window.save=de;const xi=window.hardReset=async()=>{await Fe(Le())},Ke=Xe({active:"",saves:[],showTPS:!0,theme:$t.Nordic,unthrottled:!1});ce(Ke,e=>{const t=Ne.compressToUTF16(JSON.stringify(e));localStorage.setItem(q.id,t)},{deep:!0});var Z=window.settings=Ke;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:$t.Nordic};Y.emit("loadSettings",e),Object.assign(Ke,e),xi()};function Vi(){try{let e=localStorage.getItem(q.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ne.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(Ke,t)}Y.emit("loadSettings",Ke)}catch{}}const Ri=Xe([]),on=Xe([]);function Di(e){on.push(e)}const Li=Xe([]);function H(e,t="span"){return typeof e=="function"?D({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),D({template:e})):D({render:()=>({})}):e}function et(e){if(tt(e))return typeof e=="function"?e():H(e);const t=e[me];return v(t,e[he](),null)}function at(e){if(tt(e))return typeof e=="function"?e():typeof e=="string"?v(ee,null,[e]):v(e,null,null);const t=e[me];return v(t,e[he](),null)}function tt(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[We]===!0}function ln(e,t){const n=P(null),i=P(void 0);function s(l){n.value||(n.value=setInterval(a,250)),i.value=l}function r(){n.value&&(clearInterval(n.value),n.value=null)}function a(){t&&t.value?t.value():e&&e.value&&e.value(i.value)}return zt(r),{start:s,stop:r,handleHolding:a}}function qi(e,t="div"){const n=le();return ke(()=>{n.value=H(se(e),t)}),n}function vt(e,t="div"){const n=le(null);return ke(()=>{const i=se(e);n.value=i==null?null:H(i,t)}),n}function Ai(e){return T(()=>se(e))}function se(e){return o(o(e))}function E(...e){return e.includes(Object)||e.push(Object),e}var B=(e,t)=>{const n=e.__vccOpts||e;for(const[i,s]of t)n[i]=s;return n};const Bi=D({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var b;const n=P({}),i=new ResizeObserver(l),s=P(null);gt(()=>{const y=s.value;y!=null&&i.observe(y)});let r=!0,a=P((b=s.value)==null?void 0:b.getBoundingClientRect());function l(){r&&(r=!1,Me(()=>{var y;a.value=(y=s.value)==null?void 0:y.getBoundingClientRect(),Object.values(n.value).filter(h=>h).forEach(h=>h.rect=h.element.getBoundingClientRect()),t("updateNodes",n.value),r=!0}))}Y.on("fontsLoaded",l);const d={attributes:!1,childList:!0,subtree:!1};it(Tt,(y,h)=>{const _=new MutationObserver(()=>u(y));_.observe(h,d),n.value[y]={element:h,observer:_,rect:h.getBoundingClientRect()},l()}),it(It,y=>{var h;(h=n.value[y])==null||h.observer.disconnect(),n.value[y]=void 0,l()}),it(Pt,n),it(Ot,a);function u(y){const h=n.value[y];h!=null&&(h.rect=h.element.getBoundingClientRect(),t("updateNodes",n.value))}return(y,h)=>(p(),N(ee,null,[we(y.$slots,"default",{},void 0,!0),f("div",{ref_key:"resizeListener",ref:s,class:"resize-listener"},null,512)],64))}});var un=B(Bi,[["__scopeId","data-v-2b1dc1bc"]]);const Ui=["onPointerdown"],Gi={class:"modal-wrapper"},Hi={class:"modal-container"},ji={class:"modal-header"},zi=R(" default header "),Wi={class:"modal-body"},Ki=R(" default body "),Yi={class:"modal-footer"},Zi=f("div",{class:"modal-default-flex-grow"},null,-1),xe=D({__name:"Modal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const s=te(e),r=T(()=>s.modelValue||l.value);function a(){n("update:modelValue",!1)}const l=P(!1),d=P(null),u=T(()=>{var b,y;return(y=(b=d.value)==null?void 0:b.nodes)!=null?y:null});return t({isOpen:r,nodes:u}),(b,y)=>(p(),V(kn,{to:"#modal-root"},[v(St,{name:"modal",onBeforeEnter:y[0]||(y[0]=h=>l.value=!0),onAfterLeave:y[1]||(y[1]=h=>l.value=!1)},{default:F(()=>[Mt(f("div",Ee({class:"modal-mask",onPointerdown:ze(a,["self"])},b.$attrs),[f("div",Gi,[f("div",Hi,[f("div",ji,[we(b.$slots,"header",{shown:o(r)},()=>[zi])]),f("div",Wi,[v(un,{ref_key:"contextRef",ref:d},{default:F(()=>[we(b.$slots,"body",{shown:o(r)},()=>[Ki])]),_:3},512)]),f("div",Yi,[we(b.$slots,"footer",{shown:o(r)},()=>[f("div",{class:"modal-default-footer"},[Zi,f("button",{class:"button modal-default-button",onClick:a}," Close ")])])])])])],16,Ui),[[Nn,e.modelValue]])]),_:3})]))}}),Ye=Symbol("PersistentState"),Ze=Symbol("DefaultValue"),dt=Symbol("StackTrace"),cn=Symbol("Deleted");function Ji(){var e;return((e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(t=>t.trim()).join(`
`))||""}function Be(e){const t=K(e)?e:P(e);return t[Ye]=t,t[Ze]=K(e)?e.value:e,t[dt]=Ji(),t[cn]=!1,fe.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",t,`
Created at:
`+t[dt]):qe[fe[fe.length-1]].add(t),t}Y.on("addLayer",(e,t)=>{const n=[],i=(s,r=[])=>{let a=!1;return Object.keys(s).forEach(l=>{const d=s[l];if(d&&typeof d=="object")if(Ye in d){if(a=!0,d[cn]){console.warn("Deleted persistent ref present in returned object. Ignoring...",d,`
Created at:
`+d[dt]);return}qe[e.id].delete(j in d?d[j]:d);const u=r.reduce((y,h)=>(h in y||(y[h]={}),y[h]),t),b=u[l];u[l]=d[Ye],wn(u)?b!=null?u[l]=b:u[l]=d[Ze]:b!=null?u[l].value=b:u[l].value=d[Ze]}else!(d instanceof m)&&!K(d)&&!n.includes(d)&&(typeof d.type=="symbol"&&n.push(d),i(d,[...r,l])&&(Lt(d)&&!Lt(s)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",j in s?s[j]:s,l):a=!0))}),a};i(e),qe[e.id].forEach(s=>{console.error(`Created persistent ref in ${e.id} without registering it to the layer! Make sure to include everything persistent in the returned object`,s,`
Created at:
`+s[dt])}),qe[e.id].clear()});const Tt=Symbol("RegisterNode"),It=Symbol("UnregisterNode"),Pt=Symbol("Nodes"),Ot=Symbol("Bounds"),ne=ht({});window.layers=ne;const qe={},fe=[];function Ft(e,t){return Ie(()=>{const n={},i=n.emitter=Kt();if(n.on=i.on.bind(i),n.emit=i.emit.bind(i),n.nodes=P({}),n.id=e,fe.push(e),qe[e]=new Set,n.minimized=Be(!1),Object.assign(n,t.call(n)),fe[fe.length-1]==null||fe[fe.length-1]!==e)throw`Adding layers stack in invalid state. This should not happen
Stack: ${fe}
Trying to pop ${n.id}`;return fe.pop(),C(n,"color"),C(n,"display"),C(n,"name"),Q(n,"name",n.id),C(n,"minWidth"),Q(n,"minWidth",600),C(n,"minimizable"),Q(n,"minimizable",!0),n})}function dn(e,t){if(console.info("Adding layer",e.id),ne[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,ne[e.id]);return}Q(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),ne[e.id]=e,Y.emit("addLayer",e,t.layers[e.id])}function Xi(e){return ne[e]}function fn(e){console.info("Removing layer",e.id),Y.emit("removeLayer",e),ne[e.id]=void 0}function Qi(e){fn(e),dn(e,w)}function es(e){const t=P(!1);return{openModal:()=>t.value=!0,modal:J(()=>v(xe,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>v("h2",null,[o(e.name)]),body:o(e.display)}))}}Y.on("update",function(t){Object.values(ne).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(ne).forEach(n=>{n==null||n.emit("update",t)}),Object.values(ne).forEach(n=>{n==null||n.emit("postUpdate",t)})});var ts=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:Tt,UnregisterNodeInjectionKey:It,NodesInjectionKey:Pt,BoundsInjectionKey:Ot,layers:ne,persistentRefs:qe,addingLayers:fe,createLayer:Ft,addLayer:dn,getLayer:Xi,removeLayer:fn,reloadLayer:Qi,setupLayerModal:es},Symbol.toStringTag,{value:"Module"}));const ns=D({components:{Context:un},props:{index:{type:Number,required:!0},tab:{type:Function,required:!0},display:{type:E(Object,String,Function),required:!0},minimized:{type:Object,required:!0},minWidth:{type:E(Number,String),required:!0},name:{type:E(String),required:!0},color:E(String),minimizable:E(Boolean),nodes:{type:Object,required:!0}},setup(e){const{display:t,index:n,minimized:i,minWidth:s,tab:r}=te(e),a=qi(t),l=T(()=>q.allowGoBack&&n.value>0&&!i.value);function d(){w.tabs.splice(o(e.index),1/0)}Me(()=>b(i.value,o(s.value))),ce([i,Ai(s)],([y,h])=>b(y,h));function u(y){e.nodes.value=y}function b(y,h){const _=typeof h=="number"||Number.isNaN(parseInt(h))?h+"px":h,S=r.value();S!=null&&(y?(S.style.flexGrow="0",S.style.flexShrink="0",S.style.width="60px",S.style.minWidth=S.style.flexBasis="",S.style.margin="0"):(S.style.flexGrow="",S.style.flexShrink="",S.style.width="",S.style.minWidth=S.style.flexBasis=_,S.style.margin=""))}return{component:a,showGoBack:l,updateNodes:u,unref:o,goBack:d}}});function is(e,t,n,i,s,r){const a=Se("Context");return p(),N("div",{class:"layer-container",style:re({"--layer-color":e.unref(e.color)})},[e.showGoBack?(p(),N("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...l)=>e.goBack&&e.goBack(...l))},"\u2190")):I("",!0),e.minimized.value?(p(),N("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=l=>e.minimized.value=!1)},[f("div",null,L(e.unref(e.name)),1)])):(p(),N("div",{key:2,class:ie(["layer-tab",{showGoBack:e.showGoBack}])},[v(a,{onUpdateNodes:e.updateNodes},{default:F(()=>[(p(),V(X(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(p(),N("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=l=>e.minimized.value=!0)}," \u25BC ")):I("",!0)],4)}var ss=B(ns,[["render",is],["__scopeId","data-v-34c9d881"]]);const mn=e=>(Ce("data-v-4b4bda40"),e=e(),Te(),e),rs=mn(()=>f("h2",null,"Changelog",-1)),as=mn(()=>f("details",{open:""},[f("summary",null,[R("v0.0 Initial Commit - "),f("time",null,"2021-09-04")]),R(" This is the first release :D "),f("ul",null,[f("li",{class:"feature"},"Did everything"),f("li",{class:"fix"},"Had some fun"),f("li",{class:"breaking"},"Removed everything"),f("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),os=D({__name:"Changelog",setup(e,{expose:t}){const n=P(!1);return t({open(){n.value=!0}}),(i,s)=>(p(),V(xe,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=r=>n.value=r)},{header:F(()=>[rs]),body:F(()=>[as]),_:1},8,["modelValue"]))}});var ls=B(os,[["__scopeId","data-v-4b4bda40"]]),us=D({props:{element:Object,display:{type:E(Object,String,Function),required:!0},style:E(Object,String,Array),classes:E(Object),direction:E(String),xoffset:E(String),yoffset:E(String),pinned:Object},setup(e){const{element:t,display:n,pinned:i}=te(e),s=P(!1),r=T(()=>(se(i)||s.value)&&a.value),a=vt(n),l=le(H(J(()=>{const b=se(t);return b==null?"":at(b)})));function d(b){const y=i;b.shiftKey&&y&&(y.value=!y.value,b.stopPropagation(),b.preventDefault())}const u=T(()=>se(i)&&Ct[Z.theme].showPin);return{Direction:W,isHovered:s,isShown:r,comp:a,elementComp:l,unref:o,togglePinned:d,showPin:u}}});const cs={key:0,class:"material-icons pinned"};function ds(e,t,n,i,s,r){return p(),N("div",{class:ie(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=a=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=a=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...a)=>e.togglePinned&&e.togglePinned(...a))},[we(e.$slots,"default",{},void 0,!0),e.elementComp?(p(),V(X(e.elementComp),{key:0})):I("",!0),v(St,{name:"fade"},{default:F(()=>{var a;return[e.isShown?(p(),N("div",{key:0,class:ie(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:re([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(a=e.unref(e.style))!=null?a:{}])},[e.showPin?(p(),N("span",cs,"push_pin")):I("",!0),e.comp?(p(),V(X(e.comp),{key:1})):I("",!0)],6)):I("",!0)]}),_:1})],34)}var z=B(us,[["render",ds],["__scopeId","data-v-6102fa3a"]]);const Ve=e=>(Ce("data-v-7dec2dec"),e=e(),Te(),e),fs={class:"info-modal-header"},ms=["src","alt"],hs={class:"info-modal-title"},gs={key:0},ps={key:0},vs={key:0},ys=Ve(()=>f("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),_s=Ve(()=>f("br",null,null,-1)),bs=Ve(()=>f("br",null,null,-1)),Ns=["href"],ks=Ve(()=>f("span",{class:"material-icons info-modal-discord"},"discord",-1)),ws=Ve(()=>f("div",null,[f("a",{href:"https://discord.gg/WzejVAx",class:"info-modal-discord-link"},[f("span",{class:"material-icons info-modal-discord"},"discord"),R(" The Paper Pilot Community ")])],-1)),Ms=Ve(()=>f("div",null,[f("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link"},[f("span",{class:"material-icons info-modal-discord"},"discord"),R(" The Modding Tree ")])],-1)),Ss=Ve(()=>f("br",null,null,-1));var $s=D({__name:"Info",props:{changelog:null},setup(e,{expose:t}){const n=e,{title:i,logo:s,author:r,discordName:a,discordLink:l,versionNumber:d,versionTitle:u}=q,b=te(n),y=P(!1),h=T(()=>pt(w.timePlayed)),_=T(()=>H(J(()=>v(ee,null,[on.map(et)]))));t({open(){y.value=!0}});function S(){var k;(k=o(b.changelog))==null||k.open()}return(k,A)=>(p(),V(xe,{modelValue:y.value,"onUpdate:modelValue":A[0]||(A[0]=Ue=>y.value=Ue)},{header:F(()=>[f("div",fs,[o(s)?(p(),N("img",{key:0,class:"info-modal-logo",src:o(s),alt:o(i)},null,8,ms)):I("",!0),f("div",hs,[f("h2",null,L(o(i)),1),f("h4",null,[R(" v"+L(o(d)),1),o(u)?(p(),N("span",gs,": "+L(o(u)),1)):I("",!0)])])])]),body:F(({shown:Ue})=>[Ue?(p(),N("div",ps,[o(r)?(p(),N("div",vs,"By "+L(o(r)),1)):I("",!0),ys,_s,f("div",{class:"link",onClick:S},"Changelog"),bs,f("div",null,[o(l)?(p(),N("a",{key:0,href:o(l),class:"info-modal-discord-link"},[ks,R(" "+L(o(a)),1)],8,Ns)):I("",!0)]),ws,Ms,Ss,f("div",null,"Time Played: "+L(o(h)),1),(p(),V(X(o(_))))])):I("",!0)]),_:1},8,["modelValue"]))}});var Cs=B($s,[["__scopeId","data-v-7dec2dec"]]);const Ts={class:"field"},Is={key:0,class:"field-title"},hn=D({__name:"Select",props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var a;const n=e,i=vt($e(n,"title"),"span"),s=P((a=n.options.find(l=>l.value===n.modelValue))!=null?a:null);ce($e(n,"modelValue"),l=>{var d;se(s)!==l&&(s.value=(d=n.options.find(u=>u.value===l))!=null?d:null)});function r(l){t("update:modelValue",l.value)}return(l,d)=>(p(),N("div",Ts,[o(i)?(p(),N("span",Is,[(p(),V(X(o(i))))])):I("",!0),v(o(In),{options:e.options,modelValue:s.value,"onUpdate:modelValue":[d[0]||(d[0]=u=>s.value=u),r],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const Ps={class:"field"},Os=D({__name:"Toggle",props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,i=T(()=>H(o(n.title)||"<span></span>","span")),s=T({get(){return!!n.modelValue},set(r){t("update:modelValue",r)}});return(r,a)=>(p(),N("label",Ps,[Mt(f("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":a[0]||(a[0]=l=>K(s)?s.value=l:null)},null,512),[[Mn,o(s)]]),(p(),V(X(o(i))))]))}});var be=B(Os,[["__scopeId","data-v-2b109500"]]);const gn=e=>(Ce("data-v-bc13791c"),e=e(),Te(),e),Fs=gn(()=>f("div",{class:"header"},[f("h2",null,"Options")],-1)),Es=gn(()=>f("hr",null,null,-1));var xs=D({__name:"Options",setup(e,{expose:t}){const n=P(!1);t({open(){n.value=!0}});const i=Object.keys(Ct).map(S=>({label:Ii(S),value:S})),s=T(()=>H(J(()=>v(ee,null,[Ri.map(et)])))),{showTPS:r,theme:a,unthrottled:l}=te(Z),{autosave:d,offlineProd:u}=te(w),b=T({get(){return w.devSpeed===0},set(S){w.devSpeed=S?0:null}}),y=J(()=>v("span",null,[R("Offline Production"),v(z,{display:"Save-specific"},{default:()=>[R("*")]})])),h=J(()=>v("span",null,[R("Autosave"),v(z,{display:"Save-specific"},{default:()=>[R("*")]})])),_=J(()=>v("span",null,[R("Pause game"),v(z,{display:"Save-specific"},{default:()=>[R("*")]})]));return(S,k)=>(p(),V(xe,{modelValue:n.value,"onUpdate:modelValue":k[6]||(k[6]=A=>n.value=A)},{header:F(()=>[Fs]),body:F(()=>[v(hn,{title:"Theme",options:o(i),modelValue:o(a),"onUpdate:modelValue":k[0]||(k[0]=A=>K(a)?a.value=A:null)},null,8,["options","modelValue"]),(p(),V(X(o(s)))),v(be,{title:"Show TPS",modelValue:o(r),"onUpdate:modelValue":k[1]||(k[1]=A=>K(r)?r.value=A:null)},null,8,["modelValue"]),Es,v(be,{title:"Unthrottled",modelValue:o(l),"onUpdate:modelValue":k[2]||(k[2]=A=>K(l)?l.value=A:null)},null,8,["modelValue"]),v(be,{title:o(y),modelValue:o(u),"onUpdate:modelValue":k[3]||(k[3]=A=>K(u)?u.value=A:null)},null,8,["title","modelValue"]),v(be,{title:o(h),modelValue:o(d),"onUpdate:modelValue":k[4]||(k[4]=A=>K(d)?d.value=A:null)},null,8,["title","modelValue"]),o(q).enablePausing?(p(),V(be,{key:0,title:o(_),modelValue:o(b),"onUpdate:modelValue":k[5]||(k[5]=A=>K(b)?b.value=A:null)},null,8,["title","modelValue"])):I("",!0)]),_:1},8,["modelValue"]))}});var Vs=B(xs,[["__scopeId","data-v-bc13791c"]]);const Rs=["onSubmit"],Ds={class:"field"},Ls={key:0,class:"field-title"},qs=["placeholder"],As=D({__name:"Text",props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null},emits:["update:modelValue","submit"],setup(e,{emit:t}){const i=te(e),s=T(()=>{var d;return((d=i.title)==null?void 0:d.value)&&H(o(i.title.value),"span")}),r=le(null);gt(()=>{var d;(d=r.value)==null||d.focus()});const a=T({get(){return o(i.modelValue)||""},set(d){t("update:modelValue",d)}});function l(){t("submit")}return(d,u)=>(p(),N("form",{onSubmit:ze(l,["prevent"])},[f("div",Ds,[o(s)?(p(),N("span",Ls,[(p(),V(X(o(s))))])):I("",!0),e.textArea?(p(),V(o(On),{key:1,modelValue:o(a),"onUpdate:modelValue":u[0]||(u[0]=b=>K(a)?a.value=b:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:l,ref_key:"field",ref:r},null,8,["modelValue","placeholder","maxHeight"])):Mt((p(),N("input",{key:2,type:"text","onUpdate:modelValue":u[1]||(u[1]=b=>K(a)?a.value=b:null),placeholder:e.placeholder,class:ie({fullWidth:!e.title}),onBlur:l,ref_key:"field",ref:r},null,42,qs)),[[Sn,o(a)]])])],40,Rs))}});var pn=B(As,[["__scopeId","data-v-e13d140a"]]);const Bs={key:0},Us=["onClick","disabled"],Gs={key:0},Hs=["onClick"],js=D({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const i=te(e),s=P(!1);ce(s,l=>{t("confirmingChanged",l)});function r(){if(o(i.skipConfirm)){t("click");return}s.value&&t("click"),s.value=!s.value}function a(){s.value=!1}return(l,d)=>(p(),N("span",{class:ie(["container",{confirming:s.value}])},[s.value?(p(),N("span",Bs,"Are you sure?")):I("",!0),f("button",{onClick:ze(r,["stop"]),class:"button danger",disabled:e.disabled},[s.value?(p(),N("span",Gs,"Yes")):we(l.$slots,"default",{key:1},void 0,!0)],8,Us),s.value?(p(),N("button",{key:1,class:"button",onClick:ze(a,["stop"])},"No",8,Hs)):I("",!0)],2))}});var zs=B(js,[["__scopeId","data-v-2f8ef34c"]]);const Ws=["onClick"],Ks=D({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=P(!1),i=P(null);function s(){t("click"),i.value&&clearTimeout(i.value),n.value=!1,Me(()=>{n.value=!0,i.value=setTimeout(()=>n.value=!1,500)})}return(r,a)=>(p(),N("button",{onClick:ze(s,["stop"]),class:ie(["feedback",{activated:n.value,left:e.left}])},[we(r.$slots,"default",{},void 0,!0)],10,Ws))}});var Ys=B(Ks,[["__scopeId","data-v-01a1b95c"]]);const ve=e=>(Ce("data-v-0136bef4"),e=e(),Te(),e),Zs=ve(()=>f("div",{class:"handle material-icons"},"drag_handle",-1)),Js={key:0,class:"actions"},Xs=ve(()=>f("span",{class:"material-icons"},"content_paste",-1)),Qs=ve(()=>f("span",{class:"material-icons"},"content_copy",-1)),er=ve(()=>f("span",{class:"material-icons"},"edit",-1)),tr=ve(()=>f("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),nr={key:1,class:"actions"},ir=ve(()=>f("span",{class:"material-icons"},"check",-1)),sr=ve(()=>f("span",{class:"material-icons"},"close",-1)),rr={key:2,class:"details"},ar={class:"save-version"},or=ve(()=>f("br",null,null,-1)),lr={key:0},ur={key:3,class:"details"},cr={key:4,class:"details error"},dr=ve(()=>f("br",null,null,-1)),fr=D({__name:"Save",props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:i}=te(n),s=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),r=P(!1),a=P(!1),l=P("");ce(r,()=>l.value=i.value.name||"");const d=T(()=>i.value&&i.value.id===w.id),u=T(()=>d.value?w.time:i.value&&i.value.time||0);function b(){t("editName",l.value),r.value=!1}return(y,h)=>(p(),N("div",{class:ie(["save",{active:o(d)}])},[Zs,r.value?(p(),N("div",nr,[f("button",{onClick:b,class:"button"},[v(z,{display:"Save",direction:o(W).Left,class:"info"},{default:F(()=>[ir]),_:1},8,["direction"])]),f("button",{onClick:h[5]||(h[5]=_=>r.value=!r.value),class:"button"},[v(z,{display:"Cancel",direction:o(W).Left,class:"info"},{default:F(()=>[sr]),_:1},8,["direction"])])])):(p(),N("div",Js,[o(i).error==null&&!a.value?(p(),V(Ys,{key:0,onClick:h[0]||(h[0]=_=>t("export")),class:"button",left:""},{default:F(()=>[v(z,{display:"Export",direction:o(W).Left,class:"info"},{default:F(()=>[Xs]),_:1},8,["direction"])]),_:1})):I("",!0),o(i).error==null&&!a.value?(p(),N("button",{key:1,onClick:h[1]||(h[1]=_=>t("duplicate")),class:"button"},[v(z,{display:"Duplicate",direction:o(W).Left,class:"info"},{default:F(()=>[Qs]),_:1},8,["direction"])])):I("",!0),o(i).error==null&&!a.value?(p(),N("button",{key:2,onClick:h[2]||(h[2]=_=>r.value=!r.value),class:"button"},[v(z,{display:"Edit Name",direction:o(W).Left,class:"info"},{default:F(()=>[er]),_:1},8,["direction"])])):I("",!0),v(zs,{disabled:o(d),onClick:h[3]||(h[3]=_=>t("delete")),onConfirmingChanged:h[4]||(h[4]=_=>a.value=_)},{default:F(()=>[v(z,{display:"Delete",direction:o(W).Left,class:"info"},{default:F(()=>[tr]),_:1},8,["direction"])]),_:1},8,["disabled"])])),o(i).error==null&&!r.value?(p(),N("div",rr,[f("button",{class:"button open",onClick:h[6]||(h[6]=_=>t("open"))},[f("h3",null,L(o(i).name),1)]),f("span",ar,"v"+L(o(i).modVersion),1),or,o(u)?(p(),N("div",lr,"Last played "+L(o(s).format(o(u))),1)):I("",!0)])):o(i).error==null&&r.value?(p(),N("div",ur,[v(pn,{modelValue:l.value,"onUpdate:modelValue":h[7]||(h[7]=_=>l.value=_),class:"editname",onSubmit:b},null,8,["modelValue"])])):(p(),N("div",cr,[R(" Error: Failed to load save with id "+L(o(i).id),1),dr,R(L(o(i).error),1)]))],2))}});var mr=B(fr,[["__scopeId","data-v-0136bef4"]]);const Et=e=>(Ce("data-v-3b9991aa"),e=e(),Te(),e),hr=Et(()=>f("h2",null,"Saves Manager",-1)),gr={class:"modal-footer"},pr={class:"field"},vr=Et(()=>f("span",{class:"field-title"},"Create Save",-1)),yr={class:"field-buttons"},_r={class:"footer"},br=Et(()=>f("div",{style:{"flex-grow":"1"}},null,-1)),Nr=D({__name:"SavesManager",setup(e,{expose:t}){const n=P(!1),i=P(null);t({open(){n.value=!0}});const s=P(!1),r=P(""),a=P(null);ce(r,M=>{M?Me(()=>{try{if(M[0]!=="{")if(M[0]==="e")M=decodeURIComponent(escape(atob(M)));else if(M[0]==="\u1BE1")M=Ne.decompressFromUTF16(M);else{console.warn("Unable to determine preset encoding",M),s.value=!0;return}const $=JSON.parse(M);if(typeof $!="object"){s.value=!0;return}const U=rt();$.id=U,de($),r.value="",s.value=!1,Z.saves.push(U)}catch{s.value=!0}}):s.value=!1});let l={},d=P(Object.keys(l).reduce((M,$)=>(M.push({label:$.split("/").slice(-1)[0].slice(0,-4),value:l[$]}),M),[]));const u=ht({});function b(M){if(u[M]==null){let $=localStorage.getItem(M);if($==null)u[M]={error:"Save doesn't exist in localStorage",id:M};else if($==="dW5kZWZpbmVk")u[M]={error:"Save is undefined",id:M};else try{if($[0]!=="{")if($[0]==="e")$=decodeURIComponent(escape(atob($)));else if($[0]==="\u1BE1")$=Ne.decompressFromUTF16($);else return console.warn("Unable to determine preset encoding",$),s.value=!0,u[M]={error:"Unable to determine preset encoding",id:M},u[M];u[M]={...JSON.parse($),id:M}}catch(U){u[M]={error:U,id:M},console.warn(`SavesManager: Failed to load info about save with id ${M}:
${U}
${$}`)}}return u[M]}ce(n,M=>{M&&Object.keys(u).forEach($=>delete u[$])});const y=T(()=>Z.saves.reduce((M,$)=>(M[$]=b($),M),{}));function h(M){let $;switch(w.id===M?$=sn(w[j]):$=JSON.stringify(y.value[M]),q.exportEncoding){default:console.warn(`Unknown save encoding: ${q.exportEncoding}. Defaulting to lz`);case"lz":$=Ne.compressToUTF16($);break;case"base64":$=btoa(unescape(encodeURIComponent($)));break;case"plain":break}const U=document.createElement("textarea");U.value=$,document.body.appendChild(U),U.select(),U.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(U)}function _(M){w.id===M&&de();const $={...y.value[M],id:rt()};de($),Z.saves.push($.id)}function S(M){Z.saves=Z.saves.filter($=>$!==M),localStorage.removeItem(M),u[M]=void 0}function k(M){y.value[w.id].time=w.time,de(),u[w.id]=void 0,Fe(y.value[M]),u[M]=void 0}function A(M){if(a.value=M,Me(()=>{a.value=null}),M[0]!=="{")if(M[0]==="e")M=decodeURIComponent(escape(atob(M)));else if(M[0]==="\u1BE1")M=Ne.decompressFromUTF16(M);else{console.warn("Unable to determine preset encoding",M);return}const $=JSON.parse(M);$.id=rt(),de($),Z.saves.push($.id),k($.id)}function Ue(M,$){const U=y.value[M];U&&(U.name=$,w.id===M?(w.name=$,de()):(de(U),u[M]=void 0))}return(M,$)=>(p(),V(xe,{modelValue:n.value,"onUpdate:modelValue":$[4]||($[4]=U=>n.value=U),ref_key:"modal",ref:i},{header:F(()=>[hr]),body:F(({shown:U})=>[U?(p(),V(o(Pn),{key:0,list:o(Z).saves,handle:".handle",itemKey:ye=>ye},{item:F(({element:ye})=>[v(mr,{save:o(y)[ye],onOpen:Ge=>k(ye),onExport:Ge=>h(ye),onEditName:Ge=>Ue(ye,Ge),onDuplicate:Ge=>_(ye),onDelete:Ge=>S(ye)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):I("",!0)]),footer:F(()=>[f("div",gr,[v(pn,{modelValue:r.value,"onUpdate:modelValue":$[0]||($[0]=U=>r.value=U),title:"Import Save",placeholder:"Paste your save here!",class:ie({importingFailed:s.value})},null,8,["modelValue","class"]),f("div",pr,[vr,f("div",yr,[f("button",{class:"button",onClick:$[1]||($[1]=U=>k(o(Le)().id))},"New Game"),Object.keys(o(d)).length>0?(p(),V(hn,{key:0,options:o(d),modelValue:a.value,"onUpdate:modelValue":$[2]||($[2]=U=>A(U)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):I("",!0)])]),f("div",_r,[br,f("button",{class:"button modal-default-button",onClick:$[3]||($[3]=U=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var vn=B(Nr,[["__scopeId","data-v-3b9991aa"]]);const ae=e=>(Ce("data-v-4a3f8425"),e=e(),Te(),e),kr=["src","alt"],wr={key:1,class:"title"},Mr=ae(()=>f("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),Sr={class:"discord"},$r={class:"discord-links"},Cr={key:0},Tr=["href"],Ir=ae(()=>f("li",null,[f("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),Pr=ae(()=>f("li",null,[f("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),Or={href:"https://forums.moddingtree.com/",target:"_blank"},Fr=ae(()=>f("span",{class:"material-icons"},"forum",-1)),Er=ae(()=>f("span",{class:"material-icons"},"info",-1)),xr=ae(()=>f("span",{class:"material-icons"},"library_books",-1)),Vr=ae(()=>f("span",{class:"material-icons"},"settings",-1)),Rr=ae(()=>f("span",{class:"material-icons"},"library_books",-1)),Dr=ae(()=>f("span",{class:"material-icons"},"settings",-1)),Lr=ae(()=>f("span",{class:"material-icons"},"info",-1)),qr={href:"https://forums.moddingtree.com/",target:"_blank"},Ar=ae(()=>f("span",{class:"material-icons"},"forum",-1)),Br={class:"discord"},Ur={class:"discord-links"},Gr={key:0},Hr=["href"],jr=ae(()=>f("li",null,[f("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),zr=ae(()=>f("li",null,[f("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),Wr=D({__name:"Nav",setup(e){const t=P(null),n=P(null),i=P(null),s=P(null),{useHeader:r,banner:a,title:l,discordName:d,discordLink:u,versionNumber:b}=q;function y(){window.open(u,"mywindow")}return(h,_)=>(p(),N(ee,null,[o(r)?(p(),N("div",Ee({key:0,class:"nav"},h.$attrs),[o(a)?(p(),N("img",{key:0,src:o(a),class:"banner",alt:o(l)},null,8,kr)):(p(),N("div",wr,L(o(l)),1)),f("div",{onClick:_[0]||(_[0]=S=>{var k;return(k=s.value)==null?void 0:k.open()}),class:"version-container"},[v(z,{display:"Changelog",direction:o(W).Down,class:"version"},{default:F(()=>[f("span",null,"v"+L(o(b)),1)]),_:1},8,["direction"])]),Mr,f("div",Sr,[f("span",{onClick:y,class:"material-icons"},"discord"),f("ul",$r,[o(u)?(p(),N("li",Cr,[f("a",{href:o(u),target:"_blank"},L(o(d)),9,Tr)])):I("",!0),Ir,Pr])]),f("div",null,[f("a",Or,[v(z,{display:"Forums",direction:o(W).Down,yoffset:"5px"},{default:F(()=>[Fr]),_:1},8,["direction"])])]),f("div",{onClick:_[1]||(_[1]=S=>{var k;return(k=t.value)==null?void 0:k.open()})},[v(z,{display:"Info",direction:o(W).Down,class:"info"},{default:F(()=>[Er]),_:1},8,["direction"])]),f("div",{onClick:_[2]||(_[2]=S=>{var k;return(k=n.value)==null?void 0:k.open()})},[v(z,{display:"Saves",direction:o(W).Down,xoffset:"-20px"},{default:F(()=>[xr]),_:1},8,["direction"])]),f("div",{onClick:_[3]||(_[3]=S=>{var k;return(k=i.value)==null?void 0:k.open()})},[v(z,{display:"Options",direction:o(W).Down,xoffset:"-66px"},{default:F(()=>[Vr]),_:1},8,["direction"])])],16)):(p(),N("div",Ee({key:1,class:"overlay-nav"},h.$attrs),[f("div",{onClick:_[4]||(_[4]=S=>{var k;return(k=s.value)==null?void 0:k.open()}),class:"version-container"},[v(z,{display:"Changelog",direction:o(W).Right,xoffset:"25%",class:"version"},{default:F(()=>[f("span",null,"v"+L(o(b)),1)]),_:1},8,["direction"])]),f("div",{onClick:_[5]||(_[5]=S=>{var k;return(k=n.value)==null?void 0:k.open()})},[v(z,{display:"Saves",direction:o(W).Right},{default:F(()=>[Rr]),_:1},8,["direction"])]),f("div",{onClick:_[6]||(_[6]=S=>{var k;return(k=i.value)==null?void 0:k.open()})},[v(z,{display:"Options",direction:o(W).Right},{default:F(()=>[Dr]),_:1},8,["direction"])]),f("div",{onClick:_[7]||(_[7]=S=>{var k;return(k=t.value)==null?void 0:k.open()})},[v(z,{display:"Info",direction:o(W).Right},{default:F(()=>[Lr]),_:1},8,["direction"])]),f("div",null,[f("a",qr,[v(z,{display:"Forums",direction:o(W).Right,xoffset:"7px"},{default:F(()=>[Ar]),_:1},8,["direction"])])]),f("div",Br,[f("span",{onClick:y,class:"material-icons"},"discord"),f("ul",Ur,[o(u)?(p(),N("li",Gr,[f("a",{href:o(u),target:"_blank"},L(o(d)),9,Hr)])):I("",!0),jr,zr])])],16)),v(Cs,{ref_key:"info",ref:t,changelog:s.value},null,8,["changelog"]),v(vn,{ref_key:"savesManager",ref:n},null,512),v(Vs,{ref_key:"options",ref:i},null,512),v(ls,{ref_key:"changelog",ref:s},null,512)],64))}});var yn=B(Wr,[["__scopeId","data-v-4a3f8425"]]);const Kr={class:"inner-tab"},Yr=D({__name:"Game",setup(e){const t=$e(w,"tabs"),n=T(()=>Object.keys(ne)),i=q.useHeader;function s(r){const{display:a,minimized:l,minWidth:d,name:u,color:b,minimizable:y,nodes:h}=r;return{display:a,minimized:l,minWidth:d,name:u,color:b,minimizable:y,nodes:h}}return(r,a)=>(p(),N("div",{class:ie(["tabs-container",{useHeader:o(i)}])},[(p(!0),N(ee,null,Wt(o(t),(l,d)=>{var u,b;return p(),N("div",{key:d,class:ie(["tab",o((u=o(ne)[l])==null?void 0:u.classes)]),ref_for:!0,ref:`tab-${d}`,style:re(o((b=o(ne)[l])==null?void 0:b.style))},[d===0&&!o(i)?(p(),V(yn,{key:0})):I("",!0),f("div",Kr,[o(n).includes(l)?(p(),V(ss,Ee({key:0},s(o(ne)[l]),{index:d,tab:()=>{var y;return(y=r.$refs[`tab-${d}`])==null?void 0:y[0]}}),null,16,["index","tab"])):(p(),V(X(l),{key:1,index:d},null,8,["index"]))])],6)}),128))],2))}});var Zr=B(Yr,[["__scopeId","data-v-4cb9ce0f"]]);const Jr=D({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(t,n)=>(p(),N("div",{style:re({width:e.width,height:e.height})},null,4))}});function _n(e,t="points",n=0,i=void 0){const s=K(e)?e:Be(e);return s.displayName=t,s.precision=n,s.small=i,s}function Xr(e){const t=Be(e.value);return ce(e,n=>{m.gt(n,t.value)&&(t.value=n)}),t}function Qr(e){const t=Be(e.value);return ce(e,(n,i)=>{m.gt(n,i)&&(t.value=m.add(t.value,m.sub(n,i)))}),t}const ea=new m("10^^8"),ta=new m("1e100");function na(e,t){const n=P(0),i=P(0),s=P(0);return Y.on("update",a=>{if(i.value=0,m.lte(e.value,ta)){s.value=e.value;return}let l=e.value,d=s.value;if(s.value=l,m.gt(l,d))if(m.gte(l,ea))l=m.slog(l,1e10),d=m.slog(d,1e10),n.value=l.sub(d).div(a),i.value=-1;else for(;m.div(l,d).log(10).div(a).gte("100")&&i.value<=5&&m.gt(d,0);)l=m.log10(l),d=m.log10(d),n.value=l.sub(d).div(a),i.value++}),T(()=>i.value===0?t?ge(t.value,e.precision,e.small)+" "+e.displayName+"/s":"":ge(n.value)+" OOM"+(i.value<0?"^OOM":"^"+i.value)+"s/sec")}function Je(e,t){const n=t!=null?t:e.value;return m.eq(e.precision,0)?Ae(n):ge(n,e.precision,e.small)}const ia=["x1","y1","x2","y2"],sa=D({__name:"Link",props:{link:null,startNode:null,endNode:null,boundingRect:null},setup(e){const n=te(e),i=T(()=>{const r=n.startNode.value.rect,a=n.boundingRect.value,l=a?{x:r.x+r.width/2-a.x,y:r.y+r.height/2-a.y}:{x:0,y:0};return n.link.value.offsetStart&&(l.x+=n.link.value.offsetStart.x,l.y+=n.link.value.offsetStart.y),l}),s=T(()=>{const r=n.endNode.value.rect,a=n.boundingRect.value,l=a?{x:r.x+r.width/2-a.x,y:r.y+r.height/2-a.y}:{x:0,y:0};return n.link.value.offsetEnd&&(l.x+=n.link.value.offsetEnd.x,l.y+=n.link.value.offsetEnd.y),l});return(r,a)=>(p(),N("line",Ee({"stroke-width":"15px",stroke:"white"},e.link,{x1:o(i).x,y1:o(i).y,x2:o(s).x,y2:o(s).y}),null,16,ia))}});const ra=D({__name:"Links",props:{links:null},setup(e){var d;const n=$e(e,"links"),i=P(null),s=ot(Pt,P({})),r=ot(Ot,P(void 0)),a=P((d=i.value)==null?void 0:d.getBoundingClientRect());ce(r,()=>{var u;return a.value=(u=i.value)==null?void 0:u.getBoundingClientRect()}),gt(()=>{var u;return a.value=(u=i.value)==null?void 0:u.getBoundingClientRect()});const l=T(()=>{var b,y;const u=s.value;return(y=(b=n.value)==null?void 0:b.filter(h=>{var _,S;return((_=u[h.startNode.id])==null?void 0:_.rect)&&((S=u[h.startNode.id])==null?void 0:S.rect)}))!=null?y:[]});return(u,b)=>(p(),N(ee,null,[o(l)?(p(),N("svg",$n(Ee({key:0},u.$attrs)),[(p(!0),N(ee,null,Wt(o(l),(y,h)=>(p(),V(sa,{key:h,link:y,boundingRect:a.value,startNode:o(s)[y.startNode.id],endNode:o(s)[y.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):I("",!0),f("div",{ref_key:"resizeListener",ref:i,class:"resize-listener"},null,512)],64))}});var aa=B(ra,[["__scopeId","data-v-063f6d6b"]]),oa=D({props:{nodes:{type:E(Array),required:!0},leftSideNodes:E(Array),rightSideNodes:E(Array),branches:E(Array)},components:{Links:aa},setup(e){const{nodes:t,leftSideNodes:n,rightSideNodes:i}=te(e),s=le();ke(()=>{const l=se(t);s.value=H(J(()=>v(ee,null,[l.map(d=>v("span",{class:"row tree-row",style:"margin: 50px auto;"},[d.map(at)]))])))});const r=le();ke(()=>{const l=se(n);r.value=l?H(J(()=>v("span",{class:"left-side-nodes small"},[l.map(at)]))):""});const a=le();return ke(()=>{const l=se(i);a.value=l?H(J(()=>v("span",{class:"side-nodes small"},[l.map(at)]))):""}),{unref:o,nodesComp:s,leftNodesComp:r,rightNodesComp:a}}});function la(e,t,n,i,s,r){const a=Se("Links");return p(),N(ee,null,[(p(),V(X(e.nodesComp))),e.leftNodesComp?(p(),V(X(e.leftNodesComp),{key:0})):I("",!0),e.rightNodesComp?(p(),V(X(e.rightNodesComp),{key:1})):I("",!0),e.branches?(p(),V(a,{key:2,links:e.unref(e.branches)},null,8,["links"])):I("",!0)],64)}var ua=B(oa,[["render",la],["__scopeId","data-v-39ca96d0"]]);const ca={key:0},da={key:0,class:"mark star"},fa=["src"],ma=D({__name:"MarkNode",props:{mark:{type:[Boolean,String]}},setup(e){return(t,n)=>e.mark?(p(),N("div",ca,[e.mark===!0?(p(),N("div",da)):(p(),N("img",{key:1,class:"mark",src:e.mark},null,8,fa))])):I("",!0)}});var xt=B(ma,[["__scopeId","data-v-2207999f"]]);const ha=D({__name:"Node",props:{id:null},setup(e){const n=te(e),i=ot(Tt,()=>{}),s=ot(It,()=>{}),r=le(null),a=T(()=>r.value&&r.value.parentElement);return ce([a,n.id],([l,d],[u,b])=>{u&&s(o(b)),l&&i(d,l)}),zt(()=>s(o(n.id))),(l,d)=>(p(),N("div",{class:"node",ref_key:"node",ref:r},null,512))}});var Vt=B(ha,[["__scopeId","data-v-a48cb382"]]);const ga=D({props:{display:E(Object,String,Function),visibility:{type:E(Number),required:!0},style:E(String,Object,Array),classes:E(Object),onClick:Function,onHold:Function,color:E(String),glowColor:E(String),canClick:{type:E(Boolean),required:!0},mark:E(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:xt,Node:Vt},setup(e){const{onClick:t,onHold:n,display:i}=te(e),s=vt(i),{start:r,stop:a}=ln(t,n);return{start:r,stop:a,comp:s,unref:o,Visibility:pe,isCoercableComponent:tt}}});function pa(e,t,n,i,s,r){var d;const a=Se("MarkNode"),l=Se("Node");return e.unref(e.visibility)!==e.Visibility.None?(p(),N("div",{key:0,style:re({visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0}),class:ie({treeNode:!0,can:e.unref(e.canClick),...e.unref(e.classes)}),onClick:t[0]||(t[0]=(...u)=>e.onClick&&e.onClick(...u)),onMousedown:t[1]||(t[1]=(...u)=>e.start&&e.start(...u)),onMouseleave:t[2]||(t[2]=(...u)=>e.stop&&e.stop(...u)),onMouseup:t[3]||(t[3]=(...u)=>e.stop&&e.stop(...u)),onTouchstartPassive:t[4]||(t[4]=(...u)=>e.start&&e.start(...u)),onTouchendPassive:t[5]||(t[5]=(...u)=>e.stop&&e.stop(...u)),onTouchcancelPassive:t[6]||(t[6]=(...u)=>e.stop&&e.stop(...u))},[f("div",{style:re([{backgroundColor:e.unref(e.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${e.unref(e.glowColor)}`},(d=e.unref(e.style))!=null?d:[]])},[(p(),V(X(e.unref(e.comp))))],4),v(a,{mark:e.unref(e.mark)},null,8,["mark"]),v(l,{id:e.id},null,8,["id"])],38)):I("",!0)}var va=B(ga,[["render",pa],["__scopeId","data-v-1c0c107d"]]);const ya=Symbol("TreeNode"),_a=Symbol("Tree");function ba(e){return Ie(()=>{var n;const t=(n=e==null?void 0:e())!=null?n:{};if(t.id=Qe("treeNode-"),t.type=ya,t[me]=va,C(t,"visibility"),Q(t,"visibility",pe.Visible),C(t,"canClick"),Q(t,"canClick",!0),C(t,"color"),C(t,"display"),C(t,"glowColor"),C(t,"classes"),C(t,"style"),C(t,"mark"),t.onClick){const i=t.onClick.bind(t);t.onClick=function(){o(t.canClick)&&i()}}if(t.onHold){const i=t.onHold.bind(t);t.onHold=function(){o(t.canClick)&&i()}}return t[he]=function(){const{display:i,visibility:s,style:r,classes:a,onClick:l,onHold:d,color:u,glowColor:b,canClick:y,mark:h,id:_}=this;return{display:i,visibility:s,style:r,classes:a,onClick:l,onHold:d,color:u,glowColor:b,canClick:y,mark:h,id:_}},t})}function Na(e){return Ie(()=>{const t=e();return t.id=Qe("tree-"),t.type=_a,t[me]=ua,t.isResetting=P(!1),t.resettingNode=le(null),t.reset=function(n){var s,r;const i=t;i.isResetting.value=!0,i.resettingNode.value=n,(s=i.resetPropagation)==null||s.call(i,i,n),(r=i.onReset)==null||r.call(i,n),i.isResetting.value=!1,i.resettingNode.value=null},t.links=T(()=>{var i;return(i=o(t.branches))!=null?i:[]}),C(t,"visibility"),Q(t,"visibility",pe.Visible),C(t,"nodes"),C(t,"leftSideNodes"),C(t,"rightSideNodes"),C(t,"branches"),t[he]=function(){const{nodes:n,leftSideNodes:i,rightSideNodes:s,branches:r}=this;return{nodes:n,leftSideNodes:i,rightSideNodes:s,branches:r}},t})}const ka=function(e,t){const n=[t];let i=[t];if(e.branches!=null){const s=o(e.branches);for(;i.length>0;){const r=[];i.forEach(a=>{s.filter(l=>l.startNode===a||l.endNode===a).map(l=>l.startNode===a?l.endNode:l.startNode).filter(l=>!n.includes(l)).forEach(l=>{var d;r.includes(l)||(r.push(l),(d=l.reset)==null||d.reset())})}),i=r,n.push(...i)}}};function wa(e,t=null,n=0){const i=wt(n);return T(()=>t==null||m.gte(e.value,o(i))?Je(e)+" "+e.displayName:`Reach ${m.eq(t.precision,0)?Ae(o(i)):ge(o(i),t.precision)} ${t.displayName} to unlock (You have ${m.eq(t.precision,0)?Ae(t.value):ge(t.value,t.precision)})`)}function Ma(e){return Ie(()=>{const t=e();return t.currentGain==null&&(t.currentGain=T(()=>{let n=t.gainModifier?t.gainModifier.apply(t.scaling.currentGain(t)):t.scaling.currentGain(t);return n=m.floor(n).max(0),o(t.buyMax)||(n=n.min(1)),n})),t.actualGain==null&&(t.actualGain=t.currentGain),t.currentAt==null&&(t.currentAt=T(()=>{let n=t.scaling.currentAt(t);return t.roundUpCost&&(n=m.ceil(n)),n})),t.nextAt==null&&(t.nextAt=T(()=>{let n=t.scaling.nextAt(t);return t.roundUpCost&&(n=m.ceil(n)),n})),t.convert==null&&(t.convert=function(){var i;const n=o(t.currentGain);t.gainResource.value=m.add(t.gainResource.value,n),t.spend(n),(i=t.onConvert)==null||i.call(t,n)}),t.spend==null&&(t.spend=function(){t.baseResource.value=0}),C(t,"currentGain"),C(t,"actualGain"),C(t,"currentAt"),C(t,"nextAt"),C(t,"buyMax"),Q(t,"buyMax",!0),C(t,"roundUpCost"),Q(t,"roundUpCost",!0),t})}function Sa(e,t){const n=wt(e),i=wt(t);return{currentGain(s){let r=o(s.baseResource.value);if(s.costModifier&&(r=s.costModifier.apply(r)),m.lt(r,o(n)))return 0;const a=m.div(r,o(n)).pow(o(i));return a.isNan()?new m(0):a},currentAt(s){let r=o(s.currentGain);return s.gainModifier&&(r=s.gainModifier.revert(r)),r=m.max(0,r).root(o(i)).times(o(n)),s.costModifier&&(r=s.costModifier.revert(r)),r},nextAt(s){let r=m.add(o(s.currentGain),1).floor();return s.gainModifier&&(r=s.gainModifier.revert(r)),r=m.max(0,r).root(o(i)).times(o(n)).max(o(n)),s.costModifier&&(r=s.costModifier.revert(r)),r}}}function $a(e){return Ma(e)}const yt=ht({}),Rt=Symbol("Hotkey");function Ca(e){return Ie(()=>{const t=e();return t.type=Rt,C(t,"enabled"),Q(t,"enabled",!0),C(t,"description"),t})}Y.on("addLayer",e=>{tn(e,Rt).forEach(t=>{yt[t.key]=t})});Y.on("removeLayer",e=>{tn(e,Rt).forEach(t=>{yt[t.key]=void 0})});document.onkeydown=function(e){var i;if(((i=e.target)==null?void 0:i.tagName)==="INPUT"||Dt.value&&!w.keepGoing)return;let t=e.key;e.shiftKey&&(t="shift+"+t),e.ctrlKey&&(t="ctrl+"+t);const n=yt[t];n&&o(n.enabled)&&(e.preventDefault(),n.onPress())};Di(J(()=>{const e=Object.values(yt).filter(t=>o(t==null?void 0:t.enabled));return e.length===0?"":v("div",null,[v("br",null,null),v("h4",null,[R("Hotkeys")]),e.map(t=>v("div",null,[t==null?void 0:t.key,R(": "),t==null?void 0:t.description]))])}));const Ta=Symbol("Reset");function Ia(e){return Ie(()=>{const t=e();return t.id=Qe("reset-"),t.type=Ta,t.reset=function(){var i;const n=s=>{s&&typeof s=="object"&&(Ye in s?s[Ye].value=s[Ze]:!(s instanceof m)&&!K(s)&&Object.values(s).forEach(r=>n(r)))};o(t.thingsToReset).forEach(n),Y.emit("reset",t),(i=t.onReset)==null||i.call(t)},C(t,"thingsToReset"),t})}const st={};Y.on("removeLayer",e=>{var t;(t=st[e.id])==null||t.call(st),st[e.id]=void 0});const Pa=D({__name:"Sticky",setup(e){const t=P("0"),n=new ResizeObserver(s),i=le(null);function s(){let r=i.value;if(r==null)return;let a=0;for(;r.previousSibling;){const l=r.previousSibling;l.dataset&&"vSticky"in l.dataset&&(a+=l.offsetHeight),r=l}t.value=a+"px"}return Me(s),document.fonts.ready.then(s),gt(()=>{var a;const r=(a=i.value)==null?void 0:a.parentElement;r&&n.observe(r)}),(r,a)=>(p(),N("div",{class:"sticky",style:re({top:t.value}),ref_key:"element",ref:i,"data-v-sticky":""},[we(r.$slots,"default",{},void 0,!0)],4))}});var Oa=B(Pa,[["__scopeId","data-v-cccac690"]]);const Fa=D({__name:"Resource",props:{resource:null,color:null},setup(e){const t=e,n=T(()=>Je(t.resource));return(i,s)=>(p(),N("h2",{style:re({color:e.color,"text-shadow":"0px 0px 10px "+e.color})},L(o(n)),5))}});const Ea={class:"main-display"},xa={key:0},Va={key:1},Ra=R(", "),Da=D({__name:"MainDisplay",props:{resource:null,color:null,classes:null,style:null,effectDisplay:null},setup(e){const n=te(e),i=P(null),s=vt(n.effectDisplay),r=T(()=>m.lt(n.resource.value,"1e1000"));return(a,l)=>(p(),V(Oa,null,{default:F(()=>{var d,u;return[f("div",{class:"main-display-container",style:re({height:`${((u=(d=i.value)==null?void 0:d.$el.clientHeight)!=null?u:0)+50}px`})},[f("div",Ea,[o(r)?(p(),N("span",xa,"You have ")):I("",!0),v(Fa,{resource:e.resource,color:e.color||"white"},null,8,["resource","color"]),R(" "+L(e.resource.displayName),1),o(s)?(p(),N("span",Va,[Ra,(p(),V(X(o(s)),{ref_key:"effectRef",ref:i},null,512))])):I("",!0)])],4)]}),_:1}))}});function La(e,t){return C(t,"display"),C(t,"classes"),C(t,"style"),C(t,"direction"),Q(t,"direction",W.Up),C(t,"xoffset"),C(t,"yoffset"),t.pinnable&&("pinned"in e?(console.error("Cannot add pinnable tooltip to element that already has a property called 'pinned'"),t.pinnable=!1):e.pinned=t.pinned=Be(!1)),Me(()=>{const n=e[me];e[me]=z;const i=e[he].bind(e);e[he]=function(){const{display:r,classes:a,style:l,direction:d,xoffset:u,yoffset:b,pinned:y}=this;return{element:{[me]:n,[he]:i},display:r,classes:a,style:o(l),direction:d,xoffset:u,yoffset:b,pinned:y}}.bind(t)}),t}var qa=D({props:{display:{type:E(String,Object,Function),required:!0},visibility:{type:E(Number),required:!0},style:E(String,Object,Array),classes:E(Object),resource:Object,cost:E(String,Object,Number),canPurchase:{type:E(Boolean),required:!0},bought:{type:E(Boolean),required:!0},mark:E(Boolean,String),id:{type:String,required:!0},purchase:{type:Function,required:!0}},components:{Node:Vt,MarkNode:xt},setup(e){const{display:t,cost:n}=te(e),i=le("");return ke(()=>{const s=se(t);if(s==null){i.value="";return}if(tt(s)){i.value=H(s);return}const r=se(n),a=H(s.title||"","h3"),l=H(s.description,"div"),d=H(s.effectDisplay||"");i.value=H(J(()=>{var u;return v("span",null,[s.title?v("div",null,[v(a,null,null)]):null,v(l,null,null),s.effectDisplay?v("div",null,[R("Currently: "),v(d,null,null)]):null,e.resource!=null?v(ee,null,[v("br",null,null),R("Cost: "),e.resource&&Je(e.resource,r)," ",(u=e.resource)==null?void 0:u.displayName]):null])}))}),{component:i,unref:o,Visibility:pe}}});const Aa=["disabled"];function Ba(e,t,n,i,s,r){var d;const a=Se("MarkNode"),l=Se("Node");return e.unref(e.visibility)!==e.Visibility.None?(p(),N("button",{key:0,style:re([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(d=e.unref(e.style))!=null?d:{}]),onClick:t[0]||(t[0]=(...u)=>e.purchase&&e.purchase(...u)),class:ie({feature:!0,upgrade:!0,can:e.unref(e.canPurchase),locked:!e.unref(e.canPurchase),bought:e.unref(e.bought),...e.unref(e.classes)}),disabled:!e.unref(e.canPurchase)},[e.unref(e.component)?(p(),V(X(e.unref(e.component)),{key:0})):I("",!0),v(a,{mark:e.unref(e.mark)},null,8,["mark"]),v(l,{id:e.id},null,8,["id"])],14,Aa)):I("",!0)}var Ua=B(qa,[["render",Ba],["__scopeId","data-v-7742f590"]]);const Ga=Symbol("Upgrade");function Ha(e){const t=Be(!1);return Ie(()=>{const n=e();return n.id=Qe("upgrade-"),n.type=Ga,n[me]=Ua,n.canAfford==null&&(n.resource==null||n.cost==null)&&console.warn("Error: can't create upgrade without a canAfford property or a resource and cost property",n),n.bought=t,n.canAfford==null?n.canAfford=T(()=>{const i=n;return i.resource!=null&&i.cost!=null&&m.gte(i.resource.value,o(i.cost))}):C(n,"canAfford"),n.canPurchase=T(()=>o(n.visibility)===pe.Visible&&o(n.canAfford)&&!o(n.bought)),n.purchase=function(){var s;const i=n;!o(i.canPurchase)||(i.resource!=null&&i.cost!=null&&(i.resource.value=m.sub(i.resource.value,o(i.cost))),t.value=!0,(s=i.onPurchase)==null||s.call(i))},C(n,"visibility"),Q(n,"visibility",pe.Visible),C(n,"classes"),C(n,"style"),C(n,"display"),C(n,"mark"),C(n,"cost"),C(n,"resource"),n[he]=function(){const{display:i,visibility:s,style:r,classes:a,resource:l,cost:d,canPurchase:u,bought:b,mark:y,id:h,purchase:_}=this;return{display:i,visibility:s,style:o(r),classes:a,resource:l,cost:d,canPurchase:u,bought:b,mark:y,id:h,purchase:_}},n})}var ja=D({props:{display:{type:E(Object,String,Function),required:!0},visibility:{type:E(Number),required:!0},style:E(Object,String,Array),classes:E(Object),onClick:Function,onHold:Function,canClick:{type:E(Boolean),required:!0},small:Boolean,mark:E(Boolean,String),id:{type:String,required:!0}},components:{Node:Vt,MarkNode:xt},setup(e){const{display:t,onClick:n,onHold:i}=te(e),s=le("");ke(()=>{const l=se(t);if(l==null){s.value="";return}if(tt(l)){s.value=H(l);return}const d=H(l.title||"","h3"),u=H(l.description,"div");s.value=H(J(()=>v("span",null,[l.title?v("div",null,[v(d,null,null)]):null,v(u,null,null)])))});const{start:r,stop:a}=ln(n,i);return{start:r,stop:a,comp:s,Visibility:pe,unref:o}}});function za(e,t,n,i,s,r){var d;const a=Se("MarkNode"),l=Se("Node");return e.unref(e.visibility)!==e.Visibility.None?(p(),N("button",{key:0,style:re([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(d=e.unref(e.style))!=null?d:[]]),onClick:t[0]||(t[0]=(...u)=>e.onClick&&e.onClick(...u)),onMousedown:t[1]||(t[1]=(...u)=>e.start&&e.start(...u)),onMouseleave:t[2]||(t[2]=(...u)=>e.stop&&e.stop(...u)),onMouseup:t[3]||(t[3]=(...u)=>e.stop&&e.stop(...u)),onTouchstartPassive:t[4]||(t[4]=(...u)=>e.start&&e.start(...u)),onTouchendPassive:t[5]||(t[5]=(...u)=>e.stop&&e.stop(...u)),onTouchcancelPassive:t[6]||(t[6]=(...u)=>e.stop&&e.stop(...u)),class:ie({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(p(),V(X(e.unref(e.comp)),{key:0})):I("",!0),v(a,{mark:e.unref(e.mark)},null,8,["mark"]),v(l,{id:e.id},null,8,["id"])],38)):I("",!0)}var Wa=B(ja,[["render",za],["__scopeId","data-v-5e7c90cf"]]);const Ka=Symbol("Clickable");function Ya(e){return Ie(()=>{var n;const t=(n=e==null?void 0:e())!=null?n:{};if(t.id=Qe("clickable-"),t.type=Ka,t[me]=Wa,C(t,"visibility"),Q(t,"visibility",pe.Visible),C(t,"canClick"),Q(t,"canClick",!0),C(t,"classes"),C(t,"style"),C(t,"mark"),C(t,"display"),t.onClick){const i=t.onClick.bind(t);t.onClick=function(s){o(t.canClick)&&i(s)}}if(t.onHold){const i=t.onHold.bind(t);t.onHold=function(){o(t.canClick)&&i()}}return t[he]=function(){const{display:i,visibility:s,style:r,classes:a,onClick:l,onHold:d,canClick:u,small:b,mark:y,id:h}=this;return{display:i,visibility:s,style:o(r),classes:a,onClick:l,onHold:d,canClick:u,small:b,mark:y,id:h}},t})}function Za(e){return Ya(()=>{const t=e();C(t,"showNextAt"),Q(t,"showNextAt",!0),Q(t,"minimumGain",1),t.resetDescription==null?t.resetDescription=T(()=>m.lt(t.conversion.gainResource.value,1e3)?"Reset for ":""):C(t,"resetDescription"),t.display==null&&(t.display=J(()=>v("span",null,[o(t.resetDescription),v("b",null,[Je(t.conversion.gainResource,m.max(o(t.conversion.actualGain),o(t.minimumGain)))])," ",t.conversion.gainResource.displayName,o(t.showNextAt)?v("div",null,[v("br",null,null),o(t.conversion.buyMax)?"Next:":"Req:"," ",Je(t.conversion.baseResource,o(t.conversion.buyMax)||m.floor(o(t.conversion.actualGain)).neq(1)?o(t.conversion.nextAt):o(t.conversion.currentAt))," ",t.conversion.baseResource.displayName]):null]))),t.canClick==null&&(t.canClick=T(()=>m.gte(o(t.conversion.actualGain),o(t.minimumGain))));const n=t.onClick;return t.onClick=function(){!o(t.canClick)||(t.conversion.convert(),t.tree.reset(t.treeNode),t.resetTime&&(t.resetTime.value=t.resetTime[Ze]),n==null||n())},t})}function Ja(e){return ba(()=>{const t=e();return C(t,"display"),Q(t,"display",t.layerID),C(t,"append"),{...t,display:t.display,onClick:o(t.append)?function(){if(w.tabs.includes(t.layerID)){const n=w.tabs.lastIndexOf(t.layerID);w.tabs.splice(n,1)}else w.tabs.push(t.layerID)}:function(){w.tabs.splice(1,1,t.layerID)}}})}const jt="e",ft=Ft(jt,function(){const e="Egg",t="#FFC90E",n=_n(0,"egg points"),i=$a(()=>({scaling:Sa(10,.5),baseResource:mt.points,gainResource:n,roundUpCost:!0})),s=Ia(()=>({thingsToReset:()=>[ft]})),r=Ja(()=>({layerID:jt,color:t,reset:s}));La(r,{display:wa(n),pinnable:!0});const a=Za(()=>({conversion:i,tree:mt.tree,treeNode:r})),l=Ca(()=>({description:"Reset for Egg Points",key:"e",onPress:a.onClick}));return Ha(()=>({display:{title:"Generator of Genericness",description:"Gain 1 point every second"},cost:1,resource:n})),{name:e,color:t,points:n,display:J(()=>v(ee,null,[v(Da,{resource:n,color:t},null),et(a)])),treeNode:r,hotkey:l}}),mt=Ft("main",function(){const e=_n(10),t=Xr(e),n=Qr(e),i=T(()=>new m(1));Y.on("update",a=>{e.value=m.add(e.value,m.times(i.value,a))});const s=na(e,i),r=Na(()=>({nodes:[[ft.treeNode]],branches:[],onReset(){e.value=qt(this.resettingNode.value)===qt(ft.treeNode)?0:10,t.value=e.value,n.value=e.value},resetPropagation:ka}));return{name:"Tree",links:r.links,display:J(()=>v(ee,null,[w.devSpeed===0?v("div",null,[R("Game Paused")]):null,w.devSpeed&&w.devSpeed!==1?v("div",null,[R("Dev Speed: "),ge(w.devSpeed),R("x")]):null,w.offlineTime?v("div",null,[R("Offline Time: "),pt(w.offlineTime)]):null,v("div",null,[m.lt(e.value,"1e1000")?v("span",null,[R("You have ")]):null,v("h2",null,[ge(e.value)]),m.lt(e.value,"1e1e6")?v("span",null,[R(" points")]):null]),m.gt(i.value,0)?v("div",null,[R("("),s.value,R(")")]):null,v(Jr,null,null),et(r)])),points:e,best:t,total:n,oomps:s,tree:r}}),Xa=e=>[mt,ft],Dt=T(()=>!1);function Qa(e,t){}var bn=Object.freeze(Object.defineProperty({__proto__:null,main:mt,getInitialLayers:Xa,hasWon:Dt,fixOldSave:Qa},Symbol.toStringTag,{value:"Module"}));const nt=e=>(Ce("data-v-4a50ce42"),e=e(),Te(),e),eo={class:"game-over-modal-header"},to=["src","alt"],no={class:"game-over-modal-title"},io=nt(()=>f("h2",null,"Congratulations!",-1)),so={key:0},ro=nt(()=>f("br",null,null,-1)),ao=nt(()=>f("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),oo=nt(()=>f("br",null,null,-1)),lo=["href"],uo=nt(()=>f("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),co=D({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:i,discordLink:s,versionNumber:r,versionTitle:a}=q,l=T(()=>pt(w.timePlayed)),d=T(()=>Dt.value&&!w.keepGoing),u=$e(w,"autosave");function b(){w.keepGoing=!0}function y(){Fe(Le())}return(h,_)=>(p(),V(xe,{"model-value":o(d)},{header:F(()=>[f("div",eo,[o(n)?(p(),N("img",{key:0,class:"game-over-modal-logo",src:o(n),alt:o(t)},null,8,to)):I("",!0),f("div",no,[io,f("h4",null,"You've beaten "+L(o(t))+" v"+L(o(r))+": "+L(o(a)),1)])])]),body:F(({shown:S})=>[S?(p(),N("div",so,[f("div",null,"It took you "+L(o(l))+" to beat the game.",1),ro,ao,oo,f("div",null,[f("a",{href:o(s),class:"game-over-modal-discord-link"},[uo,R(" "+L(o(i)),1)],8,lo)]),v(be,{title:"Autosave",modelValue:o(u),"onUpdate:modelValue":_[0]||(_[0]=k=>K(u)?u.value=k:null)},null,8,["modelValue"])])):I("",!0)]),footer:F(()=>[f("div",{class:"game-over-footer"},[f("button",{onClick:b,class:"button"},"Keep Going"),f("button",{onClick:y,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var fo=B(co,[["__scopeId","data-v-4a50ce42"]]);const _t=e=>(Ce("data-v-3de07c06"),e=e(),Te(),e),mo=_t(()=>f("div",{class:"nan-modal-header"},[f("h2",null,"NaN value detected!")],-1)),ho={key:0},go=_t(()=>f("br",null,null,-1)),po=["href"],vo=_t(()=>f("span",{class:"material-icons nan-modal-discord"},"discord",-1)),yo=_t(()=>f("br",null,null,-1)),_o={class:"nan-footer"},bo=D({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=q,i=$e(w,"autosave"),s=$e(G,"hasNaN"),r=P(null),a=T(()=>{var _;return(_=G.NaNPath)==null?void 0:_.join(".")}),l=T(()=>{var _;return(_=G.NaNPath)==null?void 0:_.slice(-1)[0]}),d=T(()=>G.NaNReceiver&&l.value?G.NaNReceiver[l.value]:null),u=T({get(){return w.devSpeed===0},set(_){w.devSpeed=_?null:0}});function b(){G.NaNReceiver&&l.value&&(G.NaNReceiver[l.value]=new m(0),G.hasNaN=!1)}function y(){G.NaNReceiver&&l.value&&(G.NaNReceiver[l.value]=new m(1),G.hasNaN=!1)}function h(){G.NaNReceiver&&l.value&&(G.NaNReceiver[l.value]=new m(NaN),G.hasNaN=!1)}return(_,S)=>(p(),N(ee,null,[v(xe,Ee({modelValue:o(s),"onUpdate:modelValue":S[4]||(S[4]=k=>K(s)?s.value=k:null)},_.$attrs),{header:F(()=>[mo]),body:F(()=>[f("div",null,[R(' Attempted to assign "'+L(o(a))+'" to NaN',1),o(d)?(p(),N("span",ho,L(" ")+"(previously "+L(o(ge)(o(d)))+")",1)):I("",!0),R(". Auto-saving has been "+L(o(i)?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),go,f("div",null,[f("a",{href:o(n),class:"nan-modal-discord-link"},[vo,R(" "+L(o(t)),1)],8,po)]),yo,v(be,{title:"Autosave",modelValue:o(i),"onUpdate:modelValue":S[0]||(S[0]=k=>K(i)?i.value=k:null)},null,8,["modelValue"]),o(q).enablePausing?(p(),V(be,{key:0,title:"Pause game",modelValue:o(u),"onUpdate:modelValue":S[1]||(S[1]=k=>K(u)?u.value=k:null)},null,8,["modelValue"])):I("",!0)]),footer:F(()=>[f("div",_o,[f("button",{onClick:S[2]||(S[2]=k=>{var A;return(A=r.value)==null?void 0:A.open()}),class:"button"},"Open Saves Manager"),f("button",{onClick:b,class:"button"},"Set to 0"),f("button",{onClick:y,class:"button"},"Set to 1"),o(d)&&o(m).neq(o(d),0)&&o(m).neq(o(d),1)?(p(),N("button",{key:0,onClick:S[3]||(S[3]=k=>s.value=!1),class:"button"}," Set to previous ")):I("",!0),f("button",{onClick:h,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),v(vn,{ref_key:"savesManager",ref:r},null,512)],64))}});var No=B(bo,[["__scopeId","data-v-3de07c06"]]);const ko={key:0,class:"tpsDisplay"},wo={key:0,class:"low"},Mo=D({__name:"TPS",setup(e){const t=T(()=>m.div(G.lastTenTicks.length,G.lastTenTicks.reduce((r,a)=>r+a,0))),n=P([]);ke(()=>{n.value.push(Math.round(t.value.toNumber())),n.value.length>10&&(n.value=n.value.slice(1))});const i=T(()=>n.value.reduce((r,a)=>m.max(r,a),0)),s=T(()=>m.sub(t.value,i.value).gt(1));return(r,a)=>o(t).isNan()?I("",!0):(p(),N("div",ko,[R(" TPS: "+L(o(Ae)(o(t)))+" ",1),v(St,{name:"fade"},{default:F(()=>[o(s)?(p(),N("span",wo,L(o(Ae)(o(i))),1)):I("",!0)]),_:1})]))}});var So=B(Mo,[["__scopeId","data-v-46a3ed5b"]]);var $o=D({__name:"App",setup(e){const t=q.useHeader,n=T(()=>Ct[Z.theme].variables),i=$e(Z,"showTPS"),s=T(()=>H(J(()=>v(ee,null,[Li.map(et)]))));return(r,a)=>(p(),N(ee,null,[f("div",{id:"modal-root",style:re(o(n))},null,4),f("div",{class:ie(["app",{useHeader:o(t)}]),style:re(o(n))},[o(t)?(p(),V(yn,{key:0})):I("",!0),v(Zr),o(o(i))?(p(),V(So,{key:1})):I("",!0),v(fo),v(No),(p(),V(X(o(s))))],6)],64))}});var Co=B($o,[["__scopeId","data-v-7c41425b"]]);Y.on("setupVue",e=>e.use(Fn));function To(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:s,onRegisterError:r}=e;let a,l;const d=async(u=!0)=>{u&&(a==null||a.addEventListener("controlling",b=>{b.isUpdate&&window.location.reload()})),l&&l.waiting&&await Vn(l.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){a=new xn("./sw.js",{scope:"./",type:"classic"}),a.addEventListener("activated",u=>{u.isUpdate||i==null||i()});{const u=()=>{n==null||n()};a.addEventListener("waiting",u),a.addEventListener("externalwaiting",u)}a.register({immediate:t}).then(u=>{l=u,s==null||s(u)}).catch(u=>{r==null||r(u)})}return d}function Io(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:s,onRegisterError:r}=e,a=P(!1),l=P(!1);return{updateServiceWorker:To({immediate:t,onNeedRefresh(){a.value=!0,n==null||n()},onOfflineReady(){l.value=!0,i==null||i()},onRegistered:s,onRegisterError:r}),offlineReady:l,needRefresh:a}}document.title=q.title;window.projInfo=q;if(q.id==="")throw"Project ID is empty! Please select a unique ID for this project in /src/data/projInfo.json";requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await Ei();const{globalBus:e,startGameLoop:t}=await lt(()=>Promise.resolve().then(function(){return Fi}),void 0),n=window.vue=Cn(Co);e.emit("setupVue",n),n.mount("#app"),Me(()=>{const i=En(),{updateServiceWorker:s}=Io({onNeedRefresh(){i.info("New content available, click or reload to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){s()}})},onOfflineReady(){i.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(r){r&&setInterval(r.update,60*60*1e3)}})}),t()});
